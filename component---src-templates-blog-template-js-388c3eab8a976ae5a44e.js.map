{"version":3,"sources":["webpack:///./node_modules/posthog-js/dist/module.js","webpack:///./node_modules/with-utterances/main.js","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.number.constructor.js","webpack:///./src/templates/BlogTemplate.js","webpack:///./node_modules/with-utterances/lib/index.js"],"names":["win","Config","DEBUG","LIB_VERSION","window","loc","hostname","navigator","userAgent","document","location","referrer","screen","width","height","at","ch","text","value","escapee","error","next","number","string","white","array","object","T","ArrayProto","Array","prototype","FuncProto","Function","ObjProto","Object","slice","toString","hasOwnProperty","windowConsole","console","document$1","windowOpera","opera","nativeBind","bind","nativeForEach","forEach","nativeIndexOf","indexOf","nativeIsArray","isArray","breaker","DOMAIN_MATCH_REGEX","_","trim","str","replace","console$1","isUndefined","log","apply","arguments","err","each","arg","args","concat","toArray","func","context","_bound","call","isFunction","TypeError","this","ctor","self","result","bind_instance_methods","obj","iterator","length","i","l","key","escapeHTML","s","escaped","isString","extend","source","prop","f","test","x","isArguments","iterable","values","keys","results","identity","include","target","found","includes","needle","inherit","subclass","superclass","constructor","isObject","isEmptyObject","isDate","isNumber","isElement","nodeType","encodeDates","v","k","formatDate","timestamp","Date","now","d","pad","n","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","safewrap","e","safewrap_class","klass","functions","safewrap_instance_methods","strip_empty_properties","p","ret","truncate","val","push","JSONEncode","mixed_val","quote","escapable","meta","lastIndex","a","c","charCodeAt","holder","gap","mind","partial","toJSON","isFinite","String","join","JSONDecode","m","SyntaxError","charAt","hex","uffff","parseInt","fromCharCode","word","base64Encode","data","h1","h2","h3","h4","bits","b64","ac","enc","tmp_arr","utf8Encode","start","end","stringl","utftext","c1","substring","UUID","se","Math","random","ua","buffer","xor","byte_array","j","tmp","unshift","UA","isBlockedUA","HTTPBuildQuery","formdata","arg_separator","use_val","use_key","tph_arr","encodeURIComponent","getQueryParam","url","param","RegExp","exec","decodeURIComponent","getHashParam","hash","matches","match","cookie","get","name","nameEQ","ca","split","parse","set_seconds","seconds","cross_subdomain","is_secure","cdomain","expires","secure","domain","date","setTime","getTime","toGMTString","set","days","new_cookie_val","remove","_localStorage_supported","localStorage","is_supported","supported","msg","getItem","setItem","removeItem","register_event","fixEvent","event","preventDefault","stopPropagation","returnValue","cancelBubble","element","type","handler","oldSchool","useCapture","addEventListener","ontype","old_handler","new_handler","old_handlers","old_result","new_result","makeHandler","TOKEN_MATCH_REGEX","getClassName","el","className","baseVal","getAttribute","getSafeText","elText","shouldCaptureElement","childNodes","child","isTextNode","textContent","filter","shouldCaptureValue","isElementNode","isTag","tag","tagName","toLowerCase","dom_query","getAllChildren","all","getElementsByTagName","bad_whitespace","hasClass","elem","selector","getElementsBySelector","token","foundCount","elements","currentContextIndex","tokens","currentContext","id","getElementById","nodeName","token_match","checkFunction","attrName","attrOperator","attrValue","lastIndexOf","query","info","campaignParams","campaign_keywords","kw","params","kwkey","URL","searchEngine","search","searchInfo","keyword","browser","user_agent","vendor","browserVersion","regex","undefined","parseFloat","os","device","referringDomain","properties","href","people_properties","usefulElements","curEl","parentNode","classes","autocapture","_initializedTokens","_previousElementSibling","previousElementSibling","previousSibling","_loadScript","scriptUrlToLoad","callback","scriptTag","createElement","src","onload","scripts","insertBefore","body","appendChild","_getPropertiesFromElement","tag_name","props","attributes","attr","nthChild","nthOfType","currentElem","_getDefaultProperties","eventType","host","pathname","_extractCustomPropertyValue","customProperty","propValues","querySelectorAll","matchedElem","_getCustomProperties","targetElementList","_customProperties","eventSelector","eventElements","eventElement","_getEventTarget","srcElement","_captureEvent","instance","parentIsUsefulElement","shouldCaptureDomEvent","elementsJson","explicitNoCapture","shouldCaptureEl","safeElementText","capture","_navigate","_addDomEventHandlers","init","get_config","_maybeLoadEditor","parseDecideResponse","response","_send_request","method","_prepare_callback","that","setTimeout","_editorParamsFromHash","editorParams","state","JSON","expiresInSeconds","Number","sessionStorage","stringify","history","replaceState","title","parseFromUrl","parseFromStorage","_loadEditor","_this","editorUrl","enabledForProject","numBuckets","numEnabledBuckets","charCodeSum","isBrowserSupported","DomCapture","create_properties","event_handler","after_capture_handler","posthog_instance","mp","event_name","user_callback","override_event","options","timeout","capture_callback","timeout_occured","callback_fired","LinkCapture","evt","new_tab","which","metaKey","ctrlKey","FormCapture","submit","optIn","_optInOut","optOut","hasOptedIn","_getStorageValue","hasOptedOut","win$1","nav","hasDntOn","dntValue","_hasDoNotCaptureFlagOn","addOptOutCheckPostHogPeople","_addOptOutCheck","_get_config","clearOptInOut","_getStorage","_getStorageKey","crossSubdomainCookie","persistenceType","persistencePrefix","optValue","cookieExpiration","secureCookie","captureEventName","captureProperties","getConfigValue","optedOut","apiActions","set_action","to","$set","_is_reserved_property","set_once_action","$set_once","PostHogPeople","_init","_posthog","update_referrer_info","get_referrer_info","set_once","get_distinct_id","device_id","get_property","user_id","had_persisted_distinct_id","date_encoded_data","truncated_data","json_data","encoded_data","_identify_called","_enqueue","status","conf_var","_flags","identify_called","_add_to_people_queue","_flush_one_queue","action","action_method","queue_to_params_fn","queued_data","_get_queue","action_params","_pop_from_people_queue","_flush","_set_callback","_set_once_callback","init_type","posthog_master","RESERVED_PROPERTIES","PostHogPersistence","config","campaign_params_saved","storage_type","storage","load","update_config","upgrade","save","disabled","entry","old_cookie_name","old_cookie","upgrade_from_old_lib","register_once","_expire_notification_campaigns","expire_days","clear","default_value","default_expiry","register","unregister","campaigns_shown","EXPIRY_TIME","campaign_id","update_campaign_params","update_search_keyword","safe_merge","set_disabled","set_cross_subdomain","set_secure","get_cross_subdomain","queue","q_key","_get_queue_key","q_data","set_q","_get_or_create_queue","set_once_q","q","default_val","set_event_timer","timers","remove_event_timer","__NOOP","__NOOPTIONS","USE_XHR","XMLHttpRequest","ENQUEUE_REQUESTS","sendBeacon","DEFAULT_CONFIG","DOM_LOADED","PostHogLib","create_mplib","_cached_groups","_user_decide_check_complete","_events_captureed_before_user_decide_check_complete","_execute_array","deprecate_warning","warn","_loaded","set_config","PRIMARY_INSTANCE_NAME","_event_queue","_empty_queue_count","_should_poll","_poller","__dom_loaded_queue","__request_queue","__disabled_events","_gdpr_init","uuid","_handle_unload","capture_pageview","_dom_loaded","item","_capture_dom","has_opted_out_capturing","_event_queue_poll","DomClass","dt","jsc","randomized_cb","floor","callback_string","_event_enqueue","_format_event_queue_data","requests","request","_this2","clearInterval","transport","DEFAULT_OPTIONS","body_data","use_sendBeacon","use_post","verbose_mode","img","Blob","req","open","headers","headerValue","headerName","setRequestHeader","withCredentials","onreadystatechange","readyState","responseText","statusText","send","script","async","defer","fn_name","alias_calls","other_calls","capturing_calls","execute","calls","caller","_event_is_disabled","start_timestamp","duration_in_ms","toFixed","property_blacklist","blacklisted_prop","toISOString","data_object","cb","has_unique_traits","_create_map_key","group_key","group_id","_remove_group_from_cache","page","capture_links","capture_forms","FormCaptureer","property","_register_single","identify","new_distinct_id","previous_distinct_id","reset","reset_device_id","alias","original","prop_name","property_name","disable_all_events","has_opted_in_capturing","opt_in_capturing","opt_out_capturing","clear_opt_in_out_capturing","_gdpr_update_persistence","_gdpr_call_func","opt_in_captureing","delete_user","clear_charges","opt_out_captureing","has_opted_in_captureing","has_opted_out_captureing","clear_opt_in_out_captureing","instances","override_ph_init_func","posthog","dom_loaded_handler","done","inst","attachEvent","toplevel","frameElement","documentElement","doScroll","do_scroll_check","add_dom_loaded_handler","module","exports","global","has","cof","inheritIfRequired","toPrimitive","fails","gOPN","gOPD","dP","$trim","$Number","Base","proto","BROKEN_COF","TRIM","toNumber","argument","it","third","radix","maxCode","first","NaN","code","digits","valueOf","pageQuery","withUtterances","markdownRemark","frontmatter","html","api_host","isBlogPost","dangerouslySetInnerHTML","__html","extendStatics","__extends","setPrototypeOf","__proto__","b","__","create","__assign","assign","t","defineProperty","React","WrappedComponent","repo","theme","term","label","_super","class_1","withUtterancesContainer","createRef","injectScript","setAttribute","current","injectPrefetch","head","insertAdjacentHTML","injectPreload","initUtterances","componentDidMount","render","ref","Component"],"mappings":"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","file":"component---src-templates-blog-template-js-388c3eab8a976ae5a44e.js","sourcesContent":["'use strict';\n\nrequire(\"core-js/modules/es6.date.to-iso-string\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.string.trim\");\n\nrequire(\"core-js/modules/es6.array.filter\");\n\nrequire(\"core-js/modules/es6.regexp.search\");\n\nrequire(\"core-js/modules/es6.array.last-index-of\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.regexp.constructor\");\n\nrequire(\"core-js/modules/es6.date.to-json\");\n\nrequire(\"core-js/modules/es6.date.now\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.array.iterator\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.array.is-array\");\n\nrequire(\"core-js/modules/es6.array.index-of\");\n\nrequire(\"core-js/modules/es6.array.for-each\");\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.date.to-string\");\n\nrequire(\"core-js/modules/es6.object.to-string\");\n\nvar Config = {\n  DEBUG: false,\n  LIB_VERSION: '1.0.0'\n};\n/* eslint camelcase: \"off\", eqeqeq: \"off\" */\n// since es6 imports are static and we run unit tests from the console, window won't be defined when importing this file\n\nvar win;\n\nif (typeof window === 'undefined') {\n  var loc = {\n    hostname: ''\n  };\n  win = {\n    navigator: {\n      userAgent: ''\n    },\n    document: {\n      location: loc,\n      referrer: ''\n    },\n    screen: {\n      width: 0,\n      height: 0\n    },\n    location: loc\n  };\n} else {\n  win = window;\n}\n/*\n * Saved references to long variable names, so that closure compiler can\n * minimize file size.\n */\n\n\nvar ArrayProto = Array.prototype,\n    FuncProto = Function.prototype,\n    ObjProto = Object.prototype,\n    slice = ArrayProto.slice,\n    toString = ObjProto.toString,\n    hasOwnProperty = ObjProto.hasOwnProperty,\n    windowConsole = win.console,\n    navigator = win.navigator,\n    document$1 = win.document,\n    windowOpera = win.opera,\n    screen = win.screen,\n    userAgent = navigator.userAgent;\nvar nativeBind = FuncProto.bind,\n    nativeForEach = ArrayProto.forEach,\n    nativeIndexOf = ArrayProto.indexOf,\n    nativeIsArray = Array.isArray,\n    breaker = {};\nvar DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]+\\.[a-z.]{2,6}$/i;\nvar _ = {\n  trim: function trim(str) {\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim#Polyfill\n    return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n  }\n}; // Console override\n\nvar console$1 = {\n  /** @type {function(...*)} */\n  log: function log() {\n    if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\n      try {\n        windowConsole.log.apply(windowConsole, arguments);\n      } catch (err) {\n        _.each(arguments, function (arg) {\n          windowConsole.log(arg);\n        });\n      }\n    }\n  },\n\n  /** @type {function(...*)} */\n  error: function error() {\n    if (Config.DEBUG && !_.isUndefined(windowConsole) && windowConsole) {\n      var args = ['PostHog error:'].concat(_.toArray(arguments));\n\n      try {\n        windowConsole.error.apply(windowConsole, args);\n      } catch (err) {\n        _.each(args, function (arg) {\n          windowConsole.error(arg);\n        });\n      }\n    }\n  },\n\n  /** @type {function(...*)} */\n  critical: function critical() {\n    if (!_.isUndefined(windowConsole) && windowConsole) {\n      var args = ['PostHog error:'].concat(_.toArray(arguments));\n\n      try {\n        windowConsole.error.apply(windowConsole, args);\n      } catch (err) {\n        _.each(args, function (arg) {\n          windowConsole.error(arg);\n        });\n      }\n    }\n  }\n}; // UNDERSCORE\n// Embed part of the Underscore Library\n\n_.bind = function (func, context) {\n  var args, _bound;\n\n  if (nativeBind && func.bind === nativeBind) {\n    return nativeBind.apply(func, slice.call(arguments, 1));\n  }\n\n  if (!_.isFunction(func)) {\n    throw new TypeError();\n  }\n\n  args = slice.call(arguments, 2);\n\n  _bound = function bound() {\n    if (!(this instanceof _bound)) {\n      return func.apply(context, args.concat(slice.call(arguments)));\n    }\n\n    var ctor = {};\n    ctor.prototype = func.prototype;\n    var self = new ctor();\n    ctor.prototype = null;\n    var result = func.apply(self, args.concat(slice.call(arguments)));\n\n    if (Object(result) === result) {\n      return result;\n    }\n\n    return self;\n  };\n\n  return _bound;\n};\n\n_.bind_instance_methods = function (obj) {\n  for (var func in obj) {\n    if (typeof obj[func] === 'function') {\n      obj[func] = _.bind(obj[func], obj);\n    }\n  }\n};\n/**\n * @param {*=} obj\n * @param {function(...*)=} iterator\n * @param {Object=} context\n */\n\n\n_.each = function (obj, iterator, context) {\n  if (obj === null || obj === undefined) {\n    return;\n  }\n\n  if (nativeForEach && obj.forEach === nativeForEach) {\n    obj.forEach(iterator, context);\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (i in obj && iterator.call(context, obj[i], i, obj) === breaker) {\n        return;\n      }\n    }\n  } else {\n    for (var key in obj) {\n      if (hasOwnProperty.call(obj, key)) {\n        if (iterator.call(context, obj[key], key, obj) === breaker) {\n          return;\n        }\n      }\n    }\n  }\n};\n\n_.escapeHTML = function (s) {\n  var escaped = s;\n\n  if (escaped && _.isString(escaped)) {\n    escaped = escaped.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/'/g, '&#039;');\n  }\n\n  return escaped;\n};\n\n_.extend = function (obj) {\n  _.each(slice.call(arguments, 1), function (source) {\n    for (var prop in source) {\n      if (source[prop] !== void 0) {\n        obj[prop] = source[prop];\n      }\n    }\n  });\n\n  return obj;\n};\n\n_.isArray = nativeIsArray || function (obj) {\n  return toString.call(obj) === '[object Array]';\n}; // from a comment on http://dbj.org/dbj/?p=286\n// fails on only one very rare and deliberate custom object:\n// var bomb = { toString : undefined, valueOf: function(o) { return \"function BOMBA!\"; }};\n\n\n_.isFunction = function (f) {\n  try {\n    return /^\\s*\\bfunction\\b/.test(f);\n  } catch (x) {\n    return false;\n  }\n};\n\n_.isArguments = function (obj) {\n  return !!(obj && hasOwnProperty.call(obj, 'callee'));\n};\n\n_.toArray = function (iterable) {\n  if (!iterable) {\n    return [];\n  }\n\n  if (iterable.toArray) {\n    return iterable.toArray();\n  }\n\n  if (_.isArray(iterable)) {\n    return slice.call(iterable);\n  }\n\n  if (_.isArguments(iterable)) {\n    return slice.call(iterable);\n  }\n\n  return _.values(iterable);\n};\n\n_.keys = function (obj) {\n  var results = [];\n\n  if (obj === null) {\n    return results;\n  }\n\n  _.each(obj, function (value, key) {\n    results[results.length] = key;\n  });\n\n  return results;\n};\n\n_.values = function (obj) {\n  var results = [];\n\n  if (obj === null) {\n    return results;\n  }\n\n  _.each(obj, function (value) {\n    results[results.length] = value;\n  });\n\n  return results;\n};\n\n_.identity = function (value) {\n  return value;\n};\n\n_.include = function (obj, target) {\n  var found = false;\n\n  if (obj === null) {\n    return found;\n  }\n\n  if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\n    return obj.indexOf(target) != -1;\n  }\n\n  _.each(obj, function (value) {\n    if (found || (found = value === target)) {\n      return breaker;\n    }\n  });\n\n  return found;\n};\n\n_.includes = function (str, needle) {\n  return str.indexOf(needle) !== -1;\n}; // Underscore Addons\n\n\n_.inherit = function (subclass, superclass) {\n  subclass.prototype = new superclass();\n  subclass.prototype.constructor = subclass;\n  subclass.superclass = superclass.prototype;\n  return subclass;\n};\n\n_.isObject = function (obj) {\n  return obj === Object(obj) && !_.isArray(obj);\n};\n\n_.isEmptyObject = function (obj) {\n  if (_.isObject(obj)) {\n    for (var key in obj) {\n      if (hasOwnProperty.call(obj, key)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n};\n\n_.isUndefined = function (obj) {\n  return obj === void 0;\n};\n\n_.isString = function (obj) {\n  return toString.call(obj) == '[object String]';\n};\n\n_.isDate = function (obj) {\n  return toString.call(obj) == '[object Date]';\n};\n\n_.isNumber = function (obj) {\n  return toString.call(obj) == '[object Number]';\n};\n\n_.isElement = function (obj) {\n  return !!(obj && obj.nodeType === 1);\n};\n\n_.encodeDates = function (obj) {\n  _.each(obj, function (v, k) {\n    if (_.isDate(v)) {\n      obj[k] = _.formatDate(v);\n    } else if (_.isObject(v)) {\n      obj[k] = _.encodeDates(v); // recurse\n    }\n  });\n\n  return obj;\n};\n\n_.timestamp = function () {\n  Date.now = Date.now || function () {\n    return +new Date();\n  };\n\n  return Date.now();\n};\n\n_.formatDate = function (d) {\n  // YYYY-MM-DDTHH:MM:SS in UTC\n  function pad(n) {\n    return n < 10 ? '0' + n : n;\n  }\n\n  return d.getUTCFullYear() + '-' + pad(d.getUTCMonth() + 1) + '-' + pad(d.getUTCDate()) + 'T' + pad(d.getUTCHours()) + ':' + pad(d.getUTCMinutes()) + ':' + pad(d.getUTCSeconds());\n};\n\n_.safewrap = function (f) {\n  return function () {\n    try {\n      return f.apply(this, arguments);\n    } catch (e) {\n      console$1.critical('Implementation error. Please turn on debug and contact support@posthog.com.');\n\n      if (Config.DEBUG) {\n        console$1.critical(e);\n      }\n    }\n  };\n};\n\n_.safewrap_class = function (klass, functions) {\n  for (var i = 0; i < functions.length; i++) {\n    klass.prototype[functions[i]] = _.safewrap(klass.prototype[functions[i]]);\n  }\n};\n\n_.safewrap_instance_methods = function (obj) {\n  for (var func in obj) {\n    if (typeof obj[func] === 'function') {\n      obj[func] = _.safewrap(obj[func]);\n    }\n  }\n};\n\n_.strip_empty_properties = function (p) {\n  var ret = {};\n\n  _.each(p, function (v, k) {\n    if (_.isString(v) && v.length > 0) {\n      ret[k] = v;\n    }\n  });\n\n  return ret;\n};\n/*\n * this function returns a copy of object after truncating it.  If\n * passed an Array or Object it will iterate through obj and\n * truncate all the values recursively.\n */\n\n\n_.truncate = function (obj, length) {\n  var ret;\n\n  if (typeof obj === 'string') {\n    ret = obj.slice(0, length);\n  } else if (_.isArray(obj)) {\n    ret = [];\n\n    _.each(obj, function (val) {\n      ret.push(_.truncate(val, length));\n    });\n  } else if (_.isObject(obj)) {\n    ret = {};\n\n    _.each(obj, function (val, key) {\n      ret[key] = _.truncate(val, length);\n    });\n  } else {\n    ret = obj;\n  }\n\n  return ret;\n};\n\n_.JSONEncode = function () {\n  return function (mixed_val) {\n    var value = mixed_val;\n\n    var quote = function quote(string) {\n      var escapable = /[\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g; // eslint-disable-line no-control-regex\n\n      var meta = {\n        // table of character substitutions\n        '\\b': '\\\\b',\n        '\\t': '\\\\t',\n        '\\n': '\\\\n',\n        '\\f': '\\\\f',\n        '\\r': '\\\\r',\n        '\"': '\\\\\"',\n        '\\\\': '\\\\\\\\'\n      };\n      escapable.lastIndex = 0;\n      return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n        var c = meta[a];\n        return typeof c === 'string' ? c : \"\\\\u\" + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n      }) + '\"' : '\"' + string + '\"';\n    };\n\n    var str = function str(key, holder) {\n      var gap = '';\n      var indent = '    ';\n      var i = 0; // The loop counter.\n\n      var k = ''; // The member key.\n\n      var v = ''; // The member value.\n\n      var length = 0;\n      var mind = gap;\n      var partial = [];\n      var value = holder[key]; // If the value has a toJSON method, call it to obtain a replacement value.\n\n      if (value && typeof value === 'object' && typeof value.toJSON === 'function') {\n        value = value.toJSON(key);\n      } // What happens next depends on the value's type.\n\n\n      switch (typeof value) {\n        case 'string':\n          return quote(value);\n\n        case 'number':\n          // JSON numbers must be finite. Encode non-finite numbers as null.\n          return isFinite(value) ? String(value) : 'null';\n\n        case 'boolean':\n        case 'null':\n          // If the value is a boolean or null, convert it to a string. Note:\n          // typeof null does not produce 'null'. The case is included here in\n          // the remote chance that this gets fixed someday.\n          return String(value);\n\n        case 'object':\n          // If the type is 'object', we might be dealing with an object or an array or\n          // null.\n          // Due to a specification blunder in ECMAScript, typeof null is 'object',\n          // so watch out for that case.\n          if (!value) {\n            return 'null';\n          } // Make an array to hold the partial results of stringifying this object value.\n\n\n          gap += indent;\n          partial = []; // Is the value an array?\n\n          if (toString.apply(value) === '[object Array]') {\n            // The value is an array. Stringify every element. Use null as a placeholder\n            // for non-JSON values.\n            length = value.length;\n\n            for (i = 0; i < length; i += 1) {\n              partial[i] = str(i, value) || 'null';\n            } // Join all of the elements together, separated with commas, and wrap them in\n            // brackets.\n\n\n            v = partial.length === 0 ? '[]' : gap ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' : '[' + partial.join(',') + ']';\n            gap = mind;\n            return v;\n          } // Iterate through all of the keys in the object.\n\n\n          for (k in value) {\n            if (hasOwnProperty.call(value, k)) {\n              v = str(k, value);\n\n              if (v) {\n                partial.push(quote(k) + (gap ? ': ' : ':') + v);\n              }\n            }\n          } // Join all of the member texts together, separated with commas,\n          // and wrap them in braces.\n\n\n          v = partial.length === 0 ? '{}' : gap ? '{' + partial.join(',') + '' + mind + '}' : '{' + partial.join(',') + '}';\n          gap = mind;\n          return v;\n      }\n    }; // Make a fake root object containing our value under the key of ''.\n    // Return the result of stringifying the value.\n\n\n    return str('', {\n      '': value\n    });\n  };\n}();\n/**\n * From https://github.com/douglascrockford/JSON-js/blob/master/json_parse.js\n * Slightly modified to throw a real Error rather than a POJO\n */\n\n\n_.JSONDecode = function () {\n  var at,\n      // The index of the current character\n  ch,\n      // The current character\n  escapee = {\n    '\"': '\"',\n    '\\\\': '\\\\',\n    '/': '/',\n    'b': '\\b',\n    'f': '\\f',\n    'n': '\\n',\n    'r': '\\r',\n    't': '\\t'\n  },\n      text,\n      error = function error(m) {\n    var e = new SyntaxError(m);\n    e.at = at;\n    e.text = text;\n    throw e;\n  },\n      next = function next(c) {\n    // If a c parameter is provided, verify that it matches the current character.\n    if (c && c !== ch) {\n      error('Expected \\'' + c + '\\' instead of \\'' + ch + '\\'');\n    } // Get the next character. When there are no more characters,\n    // return the empty string.\n\n\n    ch = text.charAt(at);\n    at += 1;\n    return ch;\n  },\n      number = function number() {\n    // Parse a number value.\n    var number,\n        string = '';\n\n    if (ch === '-') {\n      string = '-';\n      next('-');\n    }\n\n    while (ch >= '0' && ch <= '9') {\n      string += ch;\n      next();\n    }\n\n    if (ch === '.') {\n      string += '.';\n\n      while (next() && ch >= '0' && ch <= '9') {\n        string += ch;\n      }\n    }\n\n    if (ch === 'e' || ch === 'E') {\n      string += ch;\n      next();\n\n      if (ch === '-' || ch === '+') {\n        string += ch;\n        next();\n      }\n\n      while (ch >= '0' && ch <= '9') {\n        string += ch;\n        next();\n      }\n    }\n\n    number = +string;\n\n    if (!isFinite(number)) {\n      error('Bad number');\n    } else {\n      return number;\n    }\n  },\n      string = function string() {\n    // Parse a string value.\n    var hex,\n        i,\n        string = '',\n        uffff; // When parsing for string values, we must look for \" and \\ characters.\n\n    if (ch === '\"') {\n      while (next()) {\n        if (ch === '\"') {\n          next();\n          return string;\n        }\n\n        if (ch === '\\\\') {\n          next();\n\n          if (ch === 'u') {\n            uffff = 0;\n\n            for (i = 0; i < 4; i += 1) {\n              hex = parseInt(next(), 16);\n\n              if (!isFinite(hex)) {\n                break;\n              }\n\n              uffff = uffff * 16 + hex;\n            }\n\n            string += String.fromCharCode(uffff);\n          } else if (typeof escapee[ch] === 'string') {\n            string += escapee[ch];\n          } else {\n            break;\n          }\n        } else {\n          string += ch;\n        }\n      }\n    }\n\n    error('Bad string');\n  },\n      white = function white() {\n    // Skip whitespace.\n    while (ch && ch <= ' ') {\n      next();\n    }\n  },\n      word = function word() {\n    // true, false, or null.\n    switch (ch) {\n      case 't':\n        next('t');\n        next('r');\n        next('u');\n        next('e');\n        return true;\n\n      case 'f':\n        next('f');\n        next('a');\n        next('l');\n        next('s');\n        next('e');\n        return false;\n\n      case 'n':\n        next('n');\n        next('u');\n        next('l');\n        next('l');\n        return null;\n    }\n\n    error('Unexpected \"' + ch + '\"');\n  },\n      value,\n      // Placeholder for the value function.\n  array = function array() {\n    // Parse an array value.\n    var array = [];\n\n    if (ch === '[') {\n      next('[');\n      white();\n\n      if (ch === ']') {\n        next(']');\n        return array; // empty array\n      }\n\n      while (ch) {\n        array.push(value());\n        white();\n\n        if (ch === ']') {\n          next(']');\n          return array;\n        }\n\n        next(',');\n        white();\n      }\n    }\n\n    error('Bad array');\n  },\n      object = function object() {\n    // Parse an object value.\n    var key,\n        object = {};\n\n    if (ch === '{') {\n      next('{');\n      white();\n\n      if (ch === '}') {\n        next('}');\n        return object; // empty object\n      }\n\n      while (ch) {\n        key = string();\n        white();\n        next(':');\n\n        if (Object.hasOwnProperty.call(object, key)) {\n          error('Duplicate key \"' + key + '\"');\n        }\n\n        object[key] = value();\n        white();\n\n        if (ch === '}') {\n          next('}');\n          return object;\n        }\n\n        next(',');\n        white();\n      }\n    }\n\n    error('Bad object');\n  };\n\n  value = function value() {\n    // Parse a JSON value. It could be an object, an array, a string,\n    // a number, or a word.\n    white();\n\n    switch (ch) {\n      case '{':\n        return object();\n\n      case '[':\n        return array();\n\n      case '\"':\n        return string();\n\n      case '-':\n        return number();\n\n      default:\n        return ch >= '0' && ch <= '9' ? number() : word();\n    }\n  }; // Return the json_parse function. It will have access to all of the\n  // above functions and variables.\n\n\n  return function (source) {\n    var result;\n    text = source;\n    at = 0;\n    ch = ' ';\n    result = value();\n    white();\n\n    if (ch) {\n      error('Syntax error');\n    }\n\n    return result;\n  };\n}();\n\n_.base64Encode = function (data) {\n  var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  var o1,\n      o2,\n      o3,\n      h1,\n      h2,\n      h3,\n      h4,\n      bits,\n      i = 0,\n      ac = 0,\n      enc = '',\n      tmp_arr = [];\n\n  if (!data) {\n    return data;\n  }\n\n  data = _.utf8Encode(data);\n\n  do {\n    // pack three octets into four hexets\n    o1 = data.charCodeAt(i++);\n    o2 = data.charCodeAt(i++);\n    o3 = data.charCodeAt(i++);\n    bits = o1 << 16 | o2 << 8 | o3;\n    h1 = bits >> 18 & 0x3f;\n    h2 = bits >> 12 & 0x3f;\n    h3 = bits >> 6 & 0x3f;\n    h4 = bits & 0x3f; // use hexets to index into b64, and append result to encoded string\n\n    tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);\n  } while (i < data.length);\n\n  enc = tmp_arr.join('');\n\n  switch (data.length % 3) {\n    case 1:\n      enc = enc.slice(0, -2) + '==';\n      break;\n\n    case 2:\n      enc = enc.slice(0, -1) + '=';\n      break;\n  }\n\n  return enc;\n};\n\n_.utf8Encode = function (string) {\n  string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n  var utftext = '',\n      start,\n      end;\n  var stringl = 0,\n      n;\n  start = end = 0;\n  stringl = string.length;\n\n  for (n = 0; n < stringl; n++) {\n    var c1 = string.charCodeAt(n);\n    var enc = null;\n\n    if (c1 < 128) {\n      end++;\n    } else if (c1 > 127 && c1 < 2048) {\n      enc = String.fromCharCode(c1 >> 6 | 192, c1 & 63 | 128);\n    } else {\n      enc = String.fromCharCode(c1 >> 12 | 224, c1 >> 6 & 63 | 128, c1 & 63 | 128);\n    }\n\n    if (enc !== null) {\n      if (end > start) {\n        utftext += string.substring(start, end);\n      }\n\n      utftext += enc;\n      start = end = n + 1;\n    }\n  }\n\n  if (end > start) {\n    utftext += string.substring(start, string.length);\n  }\n\n  return utftext;\n};\n\n_.UUID = function () {\n  // Time/ticks information\n  // 1*new Date() is a cross browser version of Date.now()\n  var T = function T() {\n    var d = 1 * new Date(),\n        i = 0; // this while loop figures how many browser ticks go by\n    // before 1*new Date() returns a new number, ie the amount\n    // of ticks that go by per millisecond\n\n    while (d == 1 * new Date()) {\n      i++;\n    }\n\n    return d.toString(16) + i.toString(16);\n  }; // Math.Random entropy\n\n\n  var R = function R() {\n    return Math.random().toString(16).replace('.', '');\n  }; // User agent entropy\n  // This function takes the user agent string, and then xors\n  // together each sequence of 8 bytes.  This produces a final\n  // sequence of 8 bytes which it returns as hex.\n\n\n  var UA = function UA() {\n    var ua = userAgent,\n        i,\n        ch,\n        buffer = [],\n        ret = 0;\n\n    function xor(result, byte_array) {\n      var j,\n          tmp = 0;\n\n      for (j = 0; j < byte_array.length; j++) {\n        tmp |= buffer[j] << j * 8;\n      }\n\n      return result ^ tmp;\n    }\n\n    for (i = 0; i < ua.length; i++) {\n      ch = ua.charCodeAt(i);\n      buffer.unshift(ch & 0xFF);\n\n      if (buffer.length >= 4) {\n        ret = xor(ret, buffer);\n        buffer = [];\n      }\n    }\n\n    if (buffer.length > 0) {\n      ret = xor(ret, buffer);\n    }\n\n    return ret.toString(16);\n  };\n\n  return function () {\n    var se = (screen.height * screen.width).toString(16);\n    return T() + '-' + R() + '-' + UA() + '-' + se + '-' + T();\n  };\n}(); // _.isBlockedUA()\n// This is to block various web spiders from executing our JS and\n// sending false captureing data\n\n\n_.isBlockedUA = function (ua) {\n  if (/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(ua)) {\n    return true;\n  }\n\n  return false;\n};\n/**\n * @param {Object=} formdata\n * @param {string=} arg_separator\n */\n\n\n_.HTTPBuildQuery = function (formdata, arg_separator) {\n  var use_val,\n      use_key,\n      tph_arr = [];\n\n  if (_.isUndefined(arg_separator)) {\n    arg_separator = '&';\n  }\n\n  _.each(formdata, function (val, key) {\n    use_val = encodeURIComponent(val.toString());\n    use_key = encodeURIComponent(key);\n    tph_arr[tph_arr.length] = use_key + '=' + use_val;\n  });\n\n  return tph_arr.join(arg_separator);\n};\n\n_.getQueryParam = function (url, param) {\n  // Expects a raw URL\n  param = param.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  var regexS = '[\\\\?&]' + param + '=([^&#]*)',\n      regex = new RegExp(regexS),\n      results = regex.exec(url);\n\n  if (results === null || results && typeof results[1] !== 'string' && results[1].length) {\n    return '';\n  } else {\n    var result = results[1];\n\n    try {\n      result = decodeURIComponent(result);\n    } catch (err) {\n      console$1.error('Skipping decoding for malformed query param: ' + result);\n    }\n\n    return result.replace(/\\+/g, ' ');\n  }\n};\n\n_.getHashParam = function (hash, param) {\n  var matches = hash.match(new RegExp(param + '=([^&]*)'));\n  return matches ? matches[1] : null;\n}; // _.cookie\n// Methods partially borrowed from quirksmode.org/js/cookies.html\n\n\n_.cookie = {\n  get: function get(name) {\n    try {\n      var nameEQ = name + '=';\n      var ca = document$1.cookie.split(';');\n\n      for (var i = 0; i < ca.length; i++) {\n        var c = ca[i];\n\n        while (c.charAt(0) == ' ') {\n          c = c.substring(1, c.length);\n        }\n\n        if (c.indexOf(nameEQ) === 0) {\n          return decodeURIComponent(c.substring(nameEQ.length, c.length));\n        }\n      }\n    } catch (err) {}\n\n    return null;\n  },\n  parse: function parse(name) {\n    var cookie;\n\n    try {\n      cookie = _.JSONDecode(_.cookie.get(name)) || {};\n    } catch (err) {// noop\n    }\n\n    return cookie;\n  },\n  set_seconds: function set_seconds(name, value, seconds, cross_subdomain, is_secure) {\n    try {\n      var cdomain = '',\n          expires = '',\n          secure = '';\n\n      if (cross_subdomain) {\n        var matches = document$1.location.hostname.match(DOMAIN_MATCH_REGEX),\n            domain = matches ? matches[0] : '';\n        cdomain = domain ? '; domain=.' + domain : '';\n      }\n\n      if (seconds) {\n        var date = new Date();\n        date.setTime(date.getTime() + seconds * 1000);\n        expires = '; expires=' + date.toGMTString();\n      }\n\n      if (is_secure) {\n        secure = '; secure';\n      }\n\n      document$1.cookie = name + '=' + encodeURIComponent(value) + expires + '; path=/' + cdomain + secure;\n    } catch (err) {\n      return;\n    }\n  },\n  set: function set(name, value, days, cross_subdomain, is_secure) {\n    try {\n      var cdomain = '',\n          expires = '',\n          secure = '';\n\n      if (cross_subdomain) {\n        var matches = document$1.location.hostname.match(DOMAIN_MATCH_REGEX),\n            domain = matches ? matches[0] : '';\n        cdomain = domain ? '; domain=.' + domain : '';\n      }\n\n      if (days) {\n        var date = new Date();\n        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n        expires = '; expires=' + date.toGMTString();\n      }\n\n      if (is_secure) {\n        secure = '; secure';\n      }\n\n      var new_cookie_val = name + '=' + encodeURIComponent(value) + expires + '; path=/' + cdomain + secure;\n      document$1.cookie = new_cookie_val;\n      return new_cookie_val;\n    } catch (err) {\n      return;\n    }\n  },\n  remove: function remove(name, cross_subdomain) {\n    try {\n      _.cookie.set(name, '', -1, cross_subdomain);\n    } catch (err) {\n      return;\n    }\n  }\n}; // _.localStorage\n\nvar _localStorage_supported = null;\n_.localStorage = {\n  is_supported: function is_supported() {\n    if (_localStorage_supported !== null) {\n      return _localStorage_supported;\n    }\n\n    var supported = true;\n\n    try {\n      var key = '__mplssupport__',\n          val = 'xyz';\n\n      _.localStorage.set(key, val);\n\n      if (_.localStorage.get(key) !== val) {\n        supported = false;\n      }\n\n      _.localStorage.remove(key);\n    } catch (err) {\n      supported = false;\n    }\n\n    if (!supported) {\n      console$1.error('localStorage unsupported; falling back to cookie store');\n    }\n\n    _localStorage_supported = supported;\n    return supported;\n  },\n  error: function error(msg) {\n    console$1.error('localStorage error: ' + msg);\n  },\n  get: function get(name) {\n    try {\n      return window.localStorage.getItem(name);\n    } catch (err) {\n      _.localStorage.error(err);\n    }\n\n    return null;\n  },\n  parse: function parse(name) {\n    try {\n      return _.JSONDecode(_.localStorage.get(name)) || {};\n    } catch (err) {// noop\n    }\n\n    return null;\n  },\n  set: function set(name, value) {\n    try {\n      window.localStorage.setItem(name, value);\n    } catch (err) {\n      _.localStorage.error(err);\n    }\n  },\n  remove: function remove(name) {\n    try {\n      window.localStorage.removeItem(name);\n    } catch (err) {\n      _.localStorage.error(err);\n    }\n  }\n};\n\n_.register_event = function () {\n  // written by Dean Edwards, 2005\n  // with input from Tino Zijdel - crisp@xs4all.nl\n  // with input from Carl Sverre - mail@carlsverre.com\n  // with input from PostHog\n  // http://dean.edwards.name/weblog/2005/10/add-event/\n  // https://gist.github.com/1930440\n\n  /**\n   * @param {Object} element\n   * @param {string} type\n   * @param {function(...*)} handler\n   * @param {boolean=} oldSchool\n   * @param {boolean=} useCapture\n   */\n  var register_event = function register_event(element, type, handler, oldSchool, useCapture) {\n    if (!element) {\n      console$1.error('No valid element provided to register_event');\n      return;\n    }\n\n    if (element.addEventListener && !oldSchool) {\n      element.addEventListener(type, handler, !!useCapture);\n    } else {\n      var ontype = 'on' + type;\n      var old_handler = element[ontype]; // can be undefined\n\n      element[ontype] = makeHandler(element, handler, old_handler);\n    }\n  };\n\n  function makeHandler(element, new_handler, old_handlers) {\n    var handler = function handler(event) {\n      event = event || fixEvent(window.event); // this basically happens in firefox whenever another script\n      // overwrites the onload callback and doesn't pass the event\n      // object to previously defined callbacks.  All the browsers\n      // that don't define window.event implement addEventListener\n      // so the dom_loaded handler will still be fired as usual.\n\n      if (!event) {\n        return undefined;\n      }\n\n      var ret = true;\n      var old_result, new_result;\n\n      if (_.isFunction(old_handlers)) {\n        old_result = old_handlers(event);\n      }\n\n      new_result = new_handler.call(element, event);\n\n      if (false === old_result || false === new_result) {\n        ret = false;\n      }\n\n      return ret;\n    };\n\n    return handler;\n  }\n\n  function fixEvent(event) {\n    if (event) {\n      event.preventDefault = fixEvent.preventDefault;\n      event.stopPropagation = fixEvent.stopPropagation;\n    }\n\n    return event;\n  }\n\n  fixEvent.preventDefault = function () {\n    this.returnValue = false;\n  };\n\n  fixEvent.stopPropagation = function () {\n    this.cancelBubble = true;\n  };\n\n  return register_event;\n}();\n\nvar TOKEN_MATCH_REGEX = new RegExp('^(\\\\w*)\\\\[(\\\\w+)([=~\\\\|\\\\^\\\\$\\\\*]?)=?\"?([^\\\\]\"]*)\"?\\\\]$');\n\n_.dom_query = function () {\n  /* document.getElementsBySelector(selector)\n  - returns an array of element objects from the current document\n  matching the CSS selector. Selectors can contain element names,\n  class names and ids and can be nested. For example:\n   elements = document.getElementsBySelector('div#main p a.external')\n   Will return an array of all 'a' elements with 'external' in their\n  class attribute that are contained inside 'p' elements that are\n  contained inside the 'div' element which has id=\"main\"\n   New in version 0.4: Support for CSS2 and CSS3 attribute selectors:\n  See http://www.w3.org/TR/css3-selectors/#attribute-selectors\n   Version 0.4 - Simon Willison, March 25th 2003\n  -- Works in Phoenix 0.5, Mozilla 1.3, Opera 7, Internet Explorer 6, Internet Explorer 5 on Windows\n  -- Opera 7 fails\n   Version 0.5 - Carl Sverre, Jan 7th 2013\n  -- Now uses jQuery-esque `hasClass` for testing class name\n  equality.  This fixes a bug related to '-' characters being\n  considered not part of a 'word' in regex.\n  */\n  function getAllChildren(e) {\n    // Returns all children of element. Workaround required for IE5/Windows. Ugh.\n    return e.all ? e.all : e.getElementsByTagName('*');\n  }\n\n  var bad_whitespace = /[\\t\\r\\n]/g;\n\n  function hasClass(elem, selector) {\n    var className = ' ' + selector + ' ';\n    return (' ' + elem.className + ' ').replace(bad_whitespace, ' ').indexOf(className) >= 0;\n  }\n\n  function getElementsBySelector(selector) {\n    // Attempt to fail gracefully in lesser browsers\n    if (!document$1.getElementsByTagName) {\n      return [];\n    } // Split selector in to tokens\n\n\n    var tokens = selector.split(' ');\n    var token, bits, tagName, found, foundCount, i, j, k, elements, currentContextIndex;\n    var currentContext = [document$1];\n\n    for (i = 0; i < tokens.length; i++) {\n      token = tokens[i].replace(/^\\s+/, '').replace(/\\s+$/, '');\n\n      if (token.indexOf('#') > -1) {\n        // Token is an ID selector\n        bits = token.split('#');\n        tagName = bits[0];\n        var id = bits[1];\n        var element = document$1.getElementById(id);\n\n        if (!element || tagName && element.nodeName.toLowerCase() != tagName) {\n          // element not found or tag with that ID not found, return false\n          return [];\n        } // Set currentContext to contain just this element\n\n\n        currentContext = [element];\n        continue; // Skip to next token\n      }\n\n      if (token.indexOf('.') > -1) {\n        // Token contains a class selector\n        bits = token.split('.');\n        tagName = bits[0];\n        var className = bits[1];\n\n        if (!tagName) {\n          tagName = '*';\n        } // Get elements matching tag, filter them for class selector\n\n\n        found = [];\n        foundCount = 0;\n\n        for (j = 0; j < currentContext.length; j++) {\n          if (tagName == '*') {\n            elements = getAllChildren(currentContext[j]);\n          } else {\n            elements = currentContext[j].getElementsByTagName(tagName);\n          }\n\n          for (k = 0; k < elements.length; k++) {\n            found[foundCount++] = elements[k];\n          }\n        }\n\n        currentContext = [];\n        currentContextIndex = 0;\n\n        for (j = 0; j < found.length; j++) {\n          if (found[j].className && _.isString(found[j].className) && // some SVG elements have classNames which are not strings\n          hasClass(found[j], className)) {\n            currentContext[currentContextIndex++] = found[j];\n          }\n        }\n\n        continue; // Skip to next token\n      } // Code to deal with attribute selectors\n\n\n      var token_match = token.match(TOKEN_MATCH_REGEX);\n\n      if (token_match) {\n        tagName = token_match[1];\n        var attrName = token_match[2];\n        var attrOperator = token_match[3];\n        var attrValue = token_match[4];\n\n        if (!tagName) {\n          tagName = '*';\n        } // Grab all of the tagName elements within current context\n\n\n        found = [];\n        foundCount = 0;\n\n        for (j = 0; j < currentContext.length; j++) {\n          if (tagName == '*') {\n            elements = getAllChildren(currentContext[j]);\n          } else {\n            elements = currentContext[j].getElementsByTagName(tagName);\n          }\n\n          for (k = 0; k < elements.length; k++) {\n            found[foundCount++] = elements[k];\n          }\n        }\n\n        currentContext = [];\n        currentContextIndex = 0;\n        var checkFunction; // This function will be used to filter the elements\n\n        switch (attrOperator) {\n          case '=':\n            // Equality\n            checkFunction = function checkFunction(e) {\n              return e.getAttribute(attrName) == attrValue;\n            };\n\n            break;\n\n          case '~':\n            // Match one of space seperated words\n            checkFunction = function checkFunction(e) {\n              return e.getAttribute(attrName).match(new RegExp('\\\\b' + attrValue + '\\\\b'));\n            };\n\n            break;\n\n          case '|':\n            // Match start with value followed by optional hyphen\n            checkFunction = function checkFunction(e) {\n              return e.getAttribute(attrName).match(new RegExp('^' + attrValue + '-?'));\n            };\n\n            break;\n\n          case '^':\n            // Match starts with value\n            checkFunction = function checkFunction(e) {\n              return e.getAttribute(attrName).indexOf(attrValue) === 0;\n            };\n\n            break;\n\n          case '$':\n            // Match ends with value - fails with \"Warning\" in Opera 7\n            checkFunction = function checkFunction(e) {\n              return e.getAttribute(attrName).lastIndexOf(attrValue) == e.getAttribute(attrName).length - attrValue.length;\n            };\n\n            break;\n\n          case '*':\n            // Match ends with value\n            checkFunction = function checkFunction(e) {\n              return e.getAttribute(attrName).indexOf(attrValue) > -1;\n            };\n\n            break;\n\n          default:\n            // Just test for existence of attribute\n            checkFunction = function checkFunction(e) {\n              return e.getAttribute(attrName);\n            };\n\n        }\n\n        currentContext = [];\n        currentContextIndex = 0;\n\n        for (j = 0; j < found.length; j++) {\n          if (checkFunction(found[j])) {\n            currentContext[currentContextIndex++] = found[j];\n          }\n        } // alert('Attribute Selector: '+tagName+' '+attrName+' '+attrOperator+' '+attrValue);\n\n\n        continue; // Skip to next token\n      } // If we get here, token is JUST an element (not a class or ID selector)\n\n\n      tagName = token;\n      found = [];\n      foundCount = 0;\n\n      for (j = 0; j < currentContext.length; j++) {\n        elements = currentContext[j].getElementsByTagName(tagName);\n\n        for (k = 0; k < elements.length; k++) {\n          found[foundCount++] = elements[k];\n        }\n      }\n\n      currentContext = found;\n    }\n\n    return currentContext;\n  }\n\n  return function (query) {\n    if (_.isElement(query)) {\n      return [query];\n    } else if (_.isObject(query) && !_.isUndefined(query.length)) {\n      return query;\n    } else {\n      return getElementsBySelector.call(this, query);\n    }\n  };\n}();\n\n_.info = {\n  campaignParams: function campaignParams() {\n    var campaign_keywords = 'utm_source utm_medium utm_campaign utm_content utm_term'.split(' '),\n        kw = '',\n        params = {};\n\n    _.each(campaign_keywords, function (kwkey) {\n      kw = _.getQueryParam(document$1.URL, kwkey);\n\n      if (kw.length) {\n        params[kwkey] = kw;\n      }\n    });\n\n    return params;\n  },\n  searchEngine: function searchEngine(referrer) {\n    if (referrer.search('https?://(.*)google.([^/?]*)') === 0) {\n      return 'google';\n    } else if (referrer.search('https?://(.*)bing.com') === 0) {\n      return 'bing';\n    } else if (referrer.search('https?://(.*)yahoo.com') === 0) {\n      return 'yahoo';\n    } else if (referrer.search('https?://(.*)duckduckgo.com') === 0) {\n      return 'duckduckgo';\n    } else {\n      return null;\n    }\n  },\n  searchInfo: function searchInfo(referrer) {\n    var search = _.info.searchEngine(referrer),\n        param = search != 'yahoo' ? 'q' : 'p',\n        ret = {};\n\n    if (search !== null) {\n      ret['$search_engine'] = search;\n\n      var keyword = _.getQueryParam(referrer, param);\n\n      if (keyword.length) {\n        ret['ph_keyword'] = keyword;\n      }\n    }\n\n    return ret;\n  },\n\n  /**\n   * This function detects which browser is running this script.\n   * The order of the checks are important since many user agents\n   * include key words used in later checks.\n   */\n  browser: function browser(user_agent, vendor, opera) {\n    vendor = vendor || ''; // vendor is undefined for at least IE9\n\n    if (opera || _.includes(user_agent, ' OPR/')) {\n      if (_.includes(user_agent, 'Mini')) {\n        return 'Opera Mini';\n      }\n\n      return 'Opera';\n    } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n      return 'BlackBerry';\n    } else if (_.includes(user_agent, 'IEMobile') || _.includes(user_agent, 'WPDesktop')) {\n      return 'Internet Explorer Mobile';\n    } else if (_.includes(user_agent, 'SamsungBrowser/')) {\n      // https://developer.samsung.com/internet/user-agent-string-format\n      return 'Samsung Internet';\n    } else if (_.includes(user_agent, 'Edge') || _.includes(user_agent, 'Edg/')) {\n      return 'Microsoft Edge';\n    } else if (_.includes(user_agent, 'FBIOS')) {\n      return 'Facebook Mobile';\n    } else if (_.includes(user_agent, 'Chrome')) {\n      return 'Chrome';\n    } else if (_.includes(user_agent, 'CriOS')) {\n      return 'Chrome iOS';\n    } else if (_.includes(user_agent, 'UCWEB') || _.includes(user_agent, 'UCBrowser')) {\n      return 'UC Browser';\n    } else if (_.includes(user_agent, 'FxiOS')) {\n      return 'Firefox iOS';\n    } else if (_.includes(vendor, 'Apple')) {\n      if (_.includes(user_agent, 'Mobile')) {\n        return 'Mobile Safari';\n      }\n\n      return 'Safari';\n    } else if (_.includes(user_agent, 'Android')) {\n      return 'Android Mobile';\n    } else if (_.includes(user_agent, 'Konqueror')) {\n      return 'Konqueror';\n    } else if (_.includes(user_agent, 'Firefox')) {\n      return 'Firefox';\n    } else if (_.includes(user_agent, 'MSIE') || _.includes(user_agent, 'Trident/')) {\n      return 'Internet Explorer';\n    } else if (_.includes(user_agent, 'Gecko')) {\n      return 'Mozilla';\n    } else {\n      return '';\n    }\n  },\n\n  /**\n   * This function detects which browser version is running this script,\n   * parsing major and minor version (e.g., 42.1). User agent strings from:\n   * http://www.useragentstring.com/pages/useragentstring.php\n   */\n  browserVersion: function browserVersion(userAgent, vendor, opera) {\n    var browser = _.info.browser(userAgent, vendor, opera);\n\n    var versionRegexs = {\n      'Internet Explorer Mobile': /rv:(\\d+(\\.\\d+)?)/,\n      'Microsoft Edge': /Edge?\\/(\\d+(\\.\\d+)?)/,\n      'Chrome': /Chrome\\/(\\d+(\\.\\d+)?)/,\n      'Chrome iOS': /CriOS\\/(\\d+(\\.\\d+)?)/,\n      'UC Browser': /(UCBrowser|UCWEB)\\/(\\d+(\\.\\d+)?)/,\n      'Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n      'Mobile Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n      'Opera': /(Opera|OPR)\\/(\\d+(\\.\\d+)?)/,\n      'Firefox': /Firefox\\/(\\d+(\\.\\d+)?)/,\n      'Firefox iOS': /FxiOS\\/(\\d+(\\.\\d+)?)/,\n      'Konqueror': /Konqueror:(\\d+(\\.\\d+)?)/,\n      'BlackBerry': /BlackBerry (\\d+(\\.\\d+)?)/,\n      'Android Mobile': /android\\s(\\d+(\\.\\d+)?)/,\n      'Samsung Internet': /SamsungBrowser\\/(\\d+(\\.\\d+)?)/,\n      'Internet Explorer': /(rv:|MSIE )(\\d+(\\.\\d+)?)/,\n      'Mozilla': /rv:(\\d+(\\.\\d+)?)/\n    };\n    var regex = versionRegexs[browser];\n\n    if (regex === undefined) {\n      return null;\n    }\n\n    var matches = userAgent.match(regex);\n\n    if (!matches) {\n      return null;\n    }\n\n    return parseFloat(matches[matches.length - 2]);\n  },\n  os: function os() {\n    var a = userAgent;\n\n    if (/Windows/i.test(a)) {\n      if (/Phone/.test(a) || /WPDesktop/.test(a)) {\n        return 'Windows Phone';\n      }\n\n      return 'Windows';\n    } else if (/(iPhone|iPad|iPod)/.test(a)) {\n      return 'iOS';\n    } else if (/Android/.test(a)) {\n      return 'Android';\n    } else if (/(BlackBerry|PlayBook|BB10)/i.test(a)) {\n      return 'BlackBerry';\n    } else if (/Mac/i.test(a)) {\n      return 'Mac OS X';\n    } else if (/Linux/.test(a)) {\n      return 'Linux';\n    } else if (/CrOS/.test(a)) {\n      return 'Chrome OS';\n    } else {\n      return '';\n    }\n  },\n  device: function device(user_agent) {\n    if (/Windows Phone/i.test(user_agent) || /WPDesktop/.test(user_agent)) {\n      return 'Windows Phone';\n    } else if (/iPad/.test(user_agent)) {\n      return 'iPad';\n    } else if (/iPod/.test(user_agent)) {\n      return 'iPod Touch';\n    } else if (/iPhone/.test(user_agent)) {\n      return 'iPhone';\n    } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n      return 'BlackBerry';\n    } else if (/Android/.test(user_agent)) {\n      return 'Android';\n    } else {\n      return '';\n    }\n  },\n  referringDomain: function referringDomain(referrer) {\n    var split = referrer.split('/');\n\n    if (split.length >= 3) {\n      return split[2];\n    }\n\n    return '';\n  },\n  properties: function properties() {\n    return _.extend(_.strip_empty_properties({\n      '$os': _.info.os(),\n      '$browser': _.info.browser(userAgent, navigator.vendor, windowOpera),\n      '$referrer': document$1.referrer,\n      '$referring_domain': _.info.referringDomain(document$1.referrer),\n      '$device': _.info.device(userAgent)\n    }), {\n      '$current_url': win.location.href,\n      '$browser_version': _.info.browserVersion(userAgent, navigator.vendor, windowOpera),\n      '$screen_height': screen.height,\n      '$screen_width': screen.width,\n      '$lib': 'web',\n      '$lib_version': Config.LIB_VERSION,\n      '$insert_id': Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10),\n      '$time': _.timestamp() / 1000 // epoch time in seconds\n\n    });\n  },\n  people_properties: function people_properties() {\n    return _.extend(_.strip_empty_properties({\n      '$os': _.info.os(),\n      '$browser': _.info.browser(userAgent, navigator.vendor, windowOpera)\n    }), {\n      '$browser_version': _.info.browserVersion(userAgent, navigator.vendor, windowOpera)\n    });\n  }\n}; // EXPORTS (for closure compiler)\n\n_['toArray'] = _.toArray;\n_['isObject'] = _.isObject;\n_['JSONEncode'] = _.JSONEncode;\n_['JSONDecode'] = _.JSONDecode;\n_['isBlockedUA'] = _.isBlockedUA;\n_['isEmptyObject'] = _.isEmptyObject;\n_['info'] = _.info;\n_['info']['device'] = _.info.device;\n_['info']['browser'] = _.info.browser;\n_['info']['browserVersion'] = _.info.browserVersion;\n_['info']['properties'] = _.info.properties;\n/*\n * Get the className of an element, accounting for edge cases where element.className is an object\n * @param {Element} el - element to get the className of\n * @returns {string} the element's class\n */\n\nfunction getClassName(el) {\n  switch (typeof el.className) {\n    case 'string':\n      return el.className;\n\n    case 'object':\n      // handle cases where className might be SVGAnimatedString or some other type\n      return el.className.baseVal || el.getAttribute('class') || '';\n\n    default:\n      // future proof\n      return '';\n  }\n}\n/*\n * Get the direct text content of an element, protecting against sensitive data collection.\n * Concats textContent of each of the element's text node children; this avoids potential\n * collection of sensitive data that could happen if we used element.textContent and the\n * element had sensitive child elements, since element.textContent includes child content.\n * Scrubs values that look like they could be sensitive (i.e. cc or ssn number).\n * @param {Element} el - element to get the text of\n * @returns {string} the element's direct text content\n */\n\n\nfunction getSafeText(el) {\n  var elText = '';\n\n  if (shouldCaptureElement(el) && el.childNodes && el.childNodes.length) {\n    _.each(el.childNodes, function (child) {\n      if (isTextNode(child) && child.textContent) {\n        elText += _.trim(child.textContent) // scrub potentially sensitive values\n        .split(/(\\s+)/).filter(shouldCaptureValue).join('') // normalize whitespace\n        .replace(/[\\r\\n]/g, ' ').replace(/[ ]+/g, ' ') // truncate\n        .substring(0, 255);\n      }\n    });\n  }\n\n  return _.trim(elText);\n}\n/*\n * Check whether an element has nodeType Node.ELEMENT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\n\n\nfunction isElementNode(el) {\n  return el && el.nodeType === 1; // Node.ELEMENT_NODE - use integer constant for browser portability\n}\n/*\n * Check whether an element is of a given tag type.\n * Due to potential reference discrepancies (such as the webcomponents.js polyfill),\n * we want to match tagNames instead of specific references because something like\n * element === document.body won't always work because element might not be a native\n * element.\n * @param {Element} el - element to check\n * @param {string} tag - tag name (e.g., \"div\")\n * @returns {boolean} whether el is of the given tag type\n */\n\n\nfunction isTag(el, tag) {\n  return el && el.tagName && el.tagName.toLowerCase() === tag.toLowerCase();\n}\n/*\n * Check whether an element has nodeType Node.TEXT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\n\n\nfunction isTextNode(el) {\n  return el && el.nodeType === 3; // Node.TEXT_NODE - use integer constant for browser portability\n}\n\nvar usefulElements = ['a', 'button', 'form', 'input', 'select', 'textarea', 'label'];\n/*\n * Check whether a DOM event should be \"captureed\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @param {Event} event - event to check\n * @returns {boolean} whether the event should be captureed\n */\n\nfunction shouldCaptureDomEvent(el, event) {\n  if (!el || isTag(el, 'html') || !isElementNode(el)) {\n    return false;\n  }\n\n  var parentIsUsefulElement = false;\n  var targetElementList = [el];\n  var curEl = el;\n\n  while (curEl.parentNode && !isTag(curEl, 'body')) {\n    if (usefulElements.indexOf(curEl.parentNode.tagName.toLowerCase()) > -1) parentIsUsefulElement = true;\n    targetElementList.push(curEl.parentNode);\n    curEl = curEl.parentNode;\n  }\n\n  var tag = el.tagName.toLowerCase();\n\n  switch (tag) {\n    case 'html':\n      return false;\n\n    case 'form':\n      return event.type === 'submit';\n\n    case 'input':\n      return event.type === 'change' || event.type === 'click';\n\n    case 'select':\n    case 'textarea':\n      return event.type === 'change' || event.type === 'click';\n\n    default:\n      if (parentIsUsefulElement) return event.type == 'click';\n      return event.type === 'click' && (usefulElements.indexOf(tag) > -1 || el.getAttribute('contenteditable') === 'true');\n  }\n}\n/*\n * Check whether a DOM element should be \"captureed\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be captureed\n */\n\n\nfunction shouldCaptureElement(el) {\n  for (var curEl = el; curEl.parentNode && !isTag(curEl, 'body'); curEl = curEl.parentNode) {\n    var classes = getClassName(curEl).split(' ');\n\n    if (_.includes(classes, 'ph-sensitive') || _.includes(classes, 'ph-no-capture')) {\n      return false;\n    }\n  }\n\n  if (_.includes(getClassName(el).split(' '), 'ph-include')) {\n    return true;\n  } // don't send data from inputs or similar elements since there will always be\n  // a risk of clientside javascript placing sensitive data in attributes\n\n\n  if (isTag(el, 'input') && el.type != 'button' || isTag(el, 'select') || isTag(el, 'textarea') || el.getAttribute('contenteditable') === 'true') {\n    return false;\n  } // don't include hidden or password fields\n\n\n  var type = el.type || '';\n\n  if (typeof type === 'string') {\n    // it's possible for el.type to be a DOM element if el is a form with a child input[name=\"type\"]\n    switch (type.toLowerCase()) {\n      case 'hidden':\n        return false;\n\n      case 'password':\n        return false;\n    }\n  } // filter out data from fields that look like sensitive fields\n\n\n  var name = el.name || el.id || '';\n\n  if (typeof name === 'string') {\n    // it's possible for el.name or el.id to be a DOM element if el is a form with a child input[name=\"name\"]\n    var sensitiveNameRegex = /^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i;\n\n    if (sensitiveNameRegex.test(name.replace(/[^a-zA-Z0-9]/g, ''))) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/*\n * Check whether a string value should be \"captureed\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {string} value - string value to check\n * @returns {boolean} whether the element should be captureed\n */\n\n\nfunction shouldCaptureValue(value) {\n  if (value === null || _.isUndefined(value)) {\n    return false;\n  }\n\n  if (typeof value === 'string') {\n    value = _.trim(value); // check to see if input value looks like a credit card number\n    // see: https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9781449327453/ch04s20.html\n\n    var ccRegex = /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/;\n\n    if (ccRegex.test((value || '').replace(/[- ]/g, ''))) {\n      return false;\n    } // check to see if input value looks like a social security number\n\n\n    var ssnRegex = /(^\\d{3}-?\\d{2}-?\\d{4}$)/;\n\n    if (ssnRegex.test(value)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nvar autocapture = {\n  _initializedTokens: [],\n  _previousElementSibling: function _previousElementSibling(el) {\n    if (el.previousElementSibling) {\n      return el.previousElementSibling;\n    } else {\n      do {\n        el = el.previousSibling;\n      } while (el && !isElementNode(el));\n\n      return el;\n    }\n  },\n  _loadScript: function _loadScript(scriptUrlToLoad, callback) {\n    var scriptTag = document.createElement('script');\n    scriptTag.type = 'text/javascript';\n    scriptTag.src = scriptUrlToLoad;\n    scriptTag.onload = callback;\n    var scripts = document.getElementsByTagName('script');\n\n    if (scripts.length > 0) {\n      scripts[0].parentNode.insertBefore(scriptTag, scripts[0]);\n    } else {\n      document.body.appendChild(scriptTag);\n    }\n  },\n  _getPropertiesFromElement: function _getPropertiesFromElement(elem) {\n    var tag_name = elem.tagName.toLowerCase();\n    var props = {\n      'tag_name': tag_name\n    };\n    if (usefulElements.indexOf(tag_name) > -1) props['$el_text'] = getSafeText(elem);\n    var classes = getClassName(elem);\n    if (classes.length > 0) props['classes'] = classes.split(' ');\n\n    if (shouldCaptureElement(elem)) {\n      _.each(elem.attributes, function (attr) {\n        if (shouldCaptureValue(attr.value)) {\n          props['attr__' + attr.name] = attr.value;\n        }\n      });\n    }\n\n    var nthChild = 1;\n    var nthOfType = 1;\n    var currentElem = elem;\n\n    while (currentElem = this._previousElementSibling(currentElem)) {\n      // eslint-disable-line no-cond-assign\n      nthChild++;\n\n      if (currentElem.tagName === elem.tagName) {\n        nthOfType++;\n      }\n    }\n\n    props['nth_child'] = nthChild;\n    props['nth_of_type'] = nthOfType;\n    return props;\n  },\n  _getDefaultProperties: function _getDefaultProperties(eventType) {\n    return {\n      '$event_type': eventType,\n      '$ce_version': 1,\n      '$host': window.location.host,\n      '$pathname': window.location.pathname\n    };\n  },\n  _extractCustomPropertyValue: function _extractCustomPropertyValue(customProperty) {\n    var propValues = [];\n\n    _.each(document.querySelectorAll(customProperty['css_selector']), function (matchedElem) {\n      var value;\n\n      if (['input', 'select'].indexOf(matchedElem.tagName.toLowerCase()) > -1) {\n        value = matchedElem['value'];\n      } else if (matchedElem['textContent']) {\n        value = matchedElem['textContent'];\n      }\n\n      if (shouldCaptureValue(value)) {\n        propValues.push(value);\n      }\n    });\n\n    return propValues.join(', ');\n  },\n  _getCustomProperties: function _getCustomProperties(targetElementList) {\n    var props = {};\n\n    _.each(this._customProperties, function (customProperty) {\n      _.each(customProperty['event_selectors'], function (eventSelector) {\n        var eventElements = document.querySelectorAll(eventSelector);\n\n        _.each(eventElements, function (eventElement) {\n          if (_.includes(targetElementList, eventElement) && shouldCaptureElement(eventElement)) {\n            props[customProperty['name']] = this._extractCustomPropertyValue(customProperty);\n          }\n        }, this);\n      }, this);\n    }, this);\n\n    return props;\n  },\n  _getEventTarget: function _getEventTarget(e) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Event/target#Compatibility_notes\n    if (typeof e.target === 'undefined') {\n      return e.srcElement;\n    } else {\n      return e.target;\n    }\n  },\n  _captureEvent: function _captureEvent(e, instance) {\n    /*** Don't mess with this code without running IE8 tests on it ***/\n    var target = this._getEventTarget(e);\n\n    if (isTextNode(target)) {\n      // defeat Safari bug (see: http://www.quirksmode.org/js/events_properties.html)\n      target = target.parentNode;\n    }\n\n    if (shouldCaptureDomEvent(target, e)) {\n      var targetElementList = [target];\n      var curEl = target;\n\n      while (curEl.parentNode && !isTag(curEl, 'body')) {\n        targetElementList.push(curEl.parentNode);\n        curEl = curEl.parentNode;\n      }\n\n      var elementsJson = [];\n      var href,\n          explicitNoCapture = false;\n\n      _.each(targetElementList, function (el) {\n        var shouldCaptureEl = shouldCaptureElement(el); // if the element or a parent element is an anchor tag\n        // include the href as a property\n\n        if (el.tagName.toLowerCase() === 'a') {\n          href = el.getAttribute('href');\n          href = shouldCaptureEl && shouldCaptureValue(href) && href;\n        } // allow users to programatically prevent captureing of elements by adding class 'ph-no-capture'\n\n\n        var classes = getClassName(el).split(' ');\n\n        if (_.includes(classes, 'ph-no-capture')) {\n          explicitNoCapture = true;\n        }\n\n        elementsJson.push(this._getPropertiesFromElement(el));\n      }, this);\n\n      elementsJson[0]['$el_text'] = getSafeText(target);\n\n      if (explicitNoCapture) {\n        return false;\n      }\n\n      var safeElementText = getSafeText(target);\n      if (safeElementText && safeElementText.length) ;\n\n      var props = _.extend(this._getDefaultProperties(e.type), {\n        '$elements': elementsJson\n      }, this._getCustomProperties(targetElementList));\n\n      instance.capture('$autocapture', props);\n      return true;\n    }\n  },\n  // only reason is to stub for unit tests\n  // since you can't override window.location props\n  _navigate: function _navigate(href) {\n    window.location.href = href;\n  },\n  _addDomEventHandlers: function _addDomEventHandlers(instance) {\n    var handler = _.bind(function (e) {\n      e = e || window.event;\n\n      this._captureEvent(e, instance);\n    }, this);\n\n    _.register_event(document, 'submit', handler, false, true);\n\n    _.register_event(document, 'change', handler, false, true);\n\n    _.register_event(document, 'click', handler, false, true);\n  },\n  _customProperties: {},\n  init: function init(instance) {\n    if (!(document && document.body)) {\n      console.log('document not ready yet, trying again in 500 milliseconds...');\n      var that = this;\n      setTimeout(function () {\n        that.init(instance);\n      }, 500);\n      return;\n    }\n\n    var token = instance.get_config('token');\n\n    if (this._initializedTokens.indexOf(token) > -1) {\n      console.log('autocapture already initialized for token \"' + token + '\"');\n      return;\n    }\n\n    this._initializedTokens.push(token);\n\n    if (!this._maybeLoadEditor(instance)) {\n      // don't autocapture actions when the editor is enabled\n      var parseDecideResponse = _.bind(function (response) {\n        if (response && response['config'] && response['config']['enable_collect_everything'] === true) {\n          if (response['custom_properties']) {\n            this._customProperties = response['custom_properties'];\n          }\n\n          this._addDomEventHandlers(instance);\n        } else {\n          instance['__autocapture_enabled'] = false;\n        }\n      }, this);\n\n      instance._send_request(instance.get_config('api_host') + '/decide/', {\n        'verbose': true,\n        'version': '1',\n        'lib': 'web',\n        'token': token\n      }, {\n        method: 'GET'\n      }, instance._prepare_callback(parseDecideResponse));\n    }\n  },\n  _editorParamsFromHash: function _editorParamsFromHash(instance, hash) {\n    var editorParams;\n\n    try {\n      var state = _.getHashParam(hash, 'state');\n\n      state = JSON.parse(decodeURIComponent(state));\n\n      var expiresInSeconds = _.getHashParam(hash, 'expires_in');\n\n      editorParams = {\n        'accessToken': _.getHashParam(hash, 'access_token'),\n        'accessTokenExpiresAt': new Date().getTime() + Number(expiresInSeconds) * 1000,\n        'actionId': state['actionId'],\n        'projectToken': state['token'],\n        'apiURL': state['apiURL'],\n        'temporaryToken': state['temporaryToken']\n      };\n      window.sessionStorage.setItem('editorParams', JSON.stringify(editorParams));\n      window.sessionStorage.setItem('editorActionId', editorParams['actionId']);\n\n      if (state['desiredHash']) {\n        window.location.hash = state['desiredHash'];\n      } else if (window.history) {\n        history.replaceState('', document.title, window.location.pathname + window.location.search); // completely remove hash\n      } else {\n        window.location.hash = ''; // clear hash (but leaves # unfortunately)\n      }\n    } catch (e) {\n      console.error('Unable to parse data from hash', e);\n    }\n\n    return editorParams;\n  },\n\n  /**\n   * To load the visual editor, we need an access token and other state. That state comes from one of three places:\n   * 1. In the URL hash params if the customer is using an old snippet\n   * 2. From session storage under the key `_mpcehash` if the snippet already parsed the hash\n   * 3. From session storage under the key `editorParams` if the editor was initialized on a previous page\n   */\n  _maybeLoadEditor: function _maybeLoadEditor(instance) {\n    try {\n      var parseFromUrl = false;\n\n      if (_.getHashParam(window.location.hash, 'state')) {\n        var state = _.getHashParam(window.location.hash, 'state');\n\n        state = JSON.parse(decodeURIComponent(state));\n        parseFromUrl = state['action'] === 'mpeditor';\n      }\n\n      var parseFromStorage = !!window.sessionStorage.getItem('_mpcehash');\n      var editorParams;\n\n      if (parseFromUrl) {\n        // happens if they are initializing the editor using an old snippet\n        editorParams = this._editorParamsFromHash(instance, window.location.hash);\n      } else if (parseFromStorage) {\n        // happens if they are initialized the editor and using the new snippet\n        editorParams = this._editorParamsFromHash(instance, window.sessionStorage.getItem('_mpcehash'));\n        window.sessionStorage.removeItem('_mpcehash');\n      } else {\n        // get credentials from sessionStorage from a previous initialzation\n        editorParams = JSON.parse(window.sessionStorage.getItem('editorParams') || '{}');\n      }\n\n      if (editorParams['projectToken'] && instance.get_config('token') === editorParams['projectToken']) {\n        this._loadEditor(instance, editorParams);\n\n        return true;\n      } else {\n        return false;\n      }\n    } catch (e) {\n      return false;\n    }\n  },\n  _loadEditor: function _loadEditor(instance, editorParams) {\n    var _this = this;\n\n    if (!window['_mpEditorLoaded']) {\n      // only load the codeless event editor once, even if there are multiple instances of PostHogLib\n      window['_mpEditorLoaded'] = true;\n      var editorUrl = instance.get_config('api_host') + '/static/editor.js?_ts=' + new Date().getTime();\n\n      this._loadScript(editorUrl, function () {\n        window['ph_load_editor'](editorParams);\n      }); // Turbolinks doesn't fire an onload event but does replace the entire page, including the toolbar\n\n\n      _.register_event(window, 'turbolinks:load', function () {\n        window['_mpEditorLoaded'] = false;\n\n        _this._loadEditor(instance, editorParams);\n      });\n\n      return true;\n    }\n\n    return false;\n  },\n  // this is a mechanism to ramp up CE with no server-side interaction.\n  // when CE is active, every page load results in a decide request. we\n  // need to gently ramp this up so we don't overload decide. this decides\n  // deterministically if CE is enabled for this project by modding the char\n  // value of the project token.\n  enabledForProject: function enabledForProject(token, numBuckets, numEnabledBuckets) {\n    numBuckets = !_.isUndefined(numBuckets) ? numBuckets : 10;\n    numEnabledBuckets = !_.isUndefined(numEnabledBuckets) ? numEnabledBuckets : 10;\n    var charCodeSum = 0;\n\n    for (var i = 0; i < token.length; i++) {\n      charCodeSum += token.charCodeAt(i);\n    }\n\n    return charCodeSum % numBuckets < numEnabledBuckets;\n  },\n  isBrowserSupported: function isBrowserSupported() {\n    return _.isFunction(document.querySelectorAll);\n  }\n};\n\n_.bind_instance_methods(autocapture);\n\n_.safewrap_instance_methods(autocapture);\n/* eslint camelcase: \"off\" */\n\n/**\n * DomCapture Object\n * @constructor\n */\n\n\nvar DomCapture = function DomCapture() {}; // interface\n\n\nDomCapture.prototype.create_properties = function () {};\n\nDomCapture.prototype.event_handler = function () {};\n\nDomCapture.prototype.after_capture_handler = function () {};\n\nDomCapture.prototype.init = function (posthog_instance) {\n  this.mp = posthog_instance;\n  return this;\n};\n/**\n * @param {Object|string} query\n * @param {string} event_name\n * @param {Object=} properties\n * @param {function=} user_callback\n */\n\n\nDomCapture.prototype.capture = function (query, event_name, properties, user_callback) {\n  var that = this;\n\n  var elements = _.dom_query(query);\n\n  if (elements.length === 0) {\n    console$1.error('The DOM query (' + query + ') returned 0 elements');\n    return;\n  }\n\n  _.each(elements, function (element) {\n    _.register_event(element, this.override_event, function (e) {\n      var options = {};\n      var props = that.create_properties(properties, this);\n      var timeout = that.mp.get_config('capture_links_timeout');\n      that.event_handler(e, this, options); // in case the posthog servers don't get back to us in time\n\n      window.setTimeout(that.capture_callback(user_callback, props, options, true), timeout); // fire the captureing event\n\n      that.mp.capture(event_name, props, that.capture_callback(user_callback, props, options));\n    });\n  }, this);\n\n  return true;\n};\n/**\n * @param {function} user_callback\n * @param {Object} props\n * @param {boolean=} timeout_occured\n */\n\n\nDomCapture.prototype.capture_callback = function (user_callback, props, options, timeout_occured) {\n  timeout_occured = timeout_occured || false;\n  var that = this;\n  return function () {\n    // options is referenced from both callbacks, so we can have\n    // a 'lock' of sorts to ensure only one fires\n    if (options.callback_fired) {\n      return;\n    }\n\n    options.callback_fired = true;\n\n    if (user_callback && user_callback(timeout_occured, props) === false) {\n      // user can prevent the default functionality by\n      // returning false from their callback\n      return;\n    }\n\n    that.after_capture_handler(props, options, timeout_occured);\n  };\n};\n\nDomCapture.prototype.create_properties = function (properties, element) {\n  var props;\n\n  if (typeof properties === 'function') {\n    props = properties(element);\n  } else {\n    props = _.extend({}, properties);\n  }\n\n  return props;\n};\n/**\n * LinkCapture Object\n * @constructor\n * @extends DomCapture\n */\n\n\nvar LinkCapture = function LinkCapture() {\n  this.override_event = 'click';\n};\n\n_.inherit(LinkCapture, DomCapture);\n\nLinkCapture.prototype.create_properties = function (properties, element) {\n  var props = LinkCapture.superclass.create_properties.apply(this, arguments);\n\n  if (element.href) {\n    props['url'] = element.href;\n  }\n\n  return props;\n};\n\nLinkCapture.prototype.event_handler = function (evt, element, options) {\n  options.new_tab = evt.which === 2 || evt.metaKey || evt.ctrlKey || element.target === '_blank';\n  options.href = element.href;\n\n  if (!options.new_tab) {\n    evt.preventDefault();\n  }\n};\n\nLinkCapture.prototype.after_capture_handler = function (props, options) {\n  if (options.new_tab) {\n    return;\n  }\n\n  setTimeout(function () {\n    window.location = options.href;\n  }, 0);\n};\n/**\n * FormCapture Object\n * @constructor\n * @extends DomCapture\n */\n\n\nvar FormCapture = function FormCapture() {\n  this.override_event = 'submit';\n};\n\n_.inherit(FormCapture, DomCapture);\n\nFormCapture.prototype.event_handler = function (evt, element, options) {\n  options.element = element;\n  evt.preventDefault();\n};\n\nFormCapture.prototype.after_capture_handler = function (props, options) {\n  setTimeout(function () {\n    options.element.submit();\n  }, 0);\n};\n/**\n * GDPR utils\n *\n * The General Data Protection Regulation (GDPR) is a regulation in EU law on data protection\n * and privacy for all individuals within the European Union. It addresses the export of personal\n * data outside the EU. The GDPR aims primarily to give control back to citizens and residents\n * over their personal data and to simplify the regulatory environment for international business\n * by unifying the regulation within the EU.\n *\n * This set of utilities is intended to enable opt in/out functionality in the PostHog JS SDK.\n * These functions are used internally by the SDK and are not intended to be publicly exposed.\n */\n\n/**\n * A function used to capture a PostHog event (e.g. PostHogLib.capture)\n * @callback captureFunction\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Function} [callback] If provided, the callback function will be called after captureing the event.\n */\n\n/** Public **/\n\n\nvar GDPR_DEFAULT_PERSISTENCE_PREFIX = '__ph_opt_in_out_';\n/**\n * Opt the user in to data captureing and cookies/localstorage for the given token\n * @param {string} token - PostHog project captureing token\n * @param {Object} [options]\n * @param {captureFunction} [options.capture] - function used for captureing a PostHog event to record the opt-in action\n * @param {string} [options.captureEventName] - event name to be used for captureing the opt-in action\n * @param {Object} [options.captureProperties] - set of properties to be captureed along with the opt-in action\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\n\nfunction optIn(token, options) {\n  _optInOut(true, token, options);\n}\n/**\n * Opt the user out of data captureing and cookies/localstorage for the given token\n * @param {string} token - PostHog project captureing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-out cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-out cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-out cookie is set as secure or not\n */\n\n\nfunction optOut(token, options) {\n  _optInOut(false, token, options);\n}\n/**\n * Check whether the user has opted in to data captureing and cookies/localstorage for the given token\n * @param {string} token - PostHog project captureing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} whether the user has opted in to the given opt type\n */\n\n\nfunction hasOptedIn(token, options) {\n  return _getStorageValue(token, options) === '1';\n}\n/**\n * Check whether the user has opted out of data captureing and cookies/localstorage for the given token\n * @param {string} token - PostHog project captureing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} whether the user has opted out of the given opt type\n */\n\n\nfunction hasOptedOut(token, options) {\n  if (_hasDoNotCaptureFlagOn(options)) {\n    return true;\n  }\n\n  return _getStorageValue(token, options) === '0';\n}\n/**\n * Wrap a PostHogLib method with a check for whether the user is opted out of data captureing and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\n\n\nfunction addOptOutCheckPostHogLib(method) {\n  return _addOptOutCheck(method, function (name) {\n    return this.get_config(name);\n  });\n}\n/**\n * Wrap a PostHogPeople method with a check for whether the user is opted out of data captureing and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\n\n\nfunction addOptOutCheckPostHogPeople(method) {\n  return _addOptOutCheck(method, function (name) {\n    return this._get_config(name);\n  });\n}\n/**\n * Clear the user's opt in/out status of data captureing and cookies/localstorage for the given token\n * @param {string} token - PostHog project captureing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\n\n\nfunction clearOptInOut(token, options) {\n  options = options || {};\n\n  _getStorage(options).remove(_getStorageKey(token, options), !!options.crossSubdomainCookie);\n}\n/** Private **/\n\n/**\n * Get storage util\n * @param {Object} [options]\n * @param {string} [options.persistenceType]\n * @returns {object} either _.cookie or _.localstorage\n */\n\n\nfunction _getStorage(options) {\n  options = options || {};\n  return options.persistenceType === 'localStorage' ? _.localStorage : _.cookie;\n}\n/**\n * Get the name of the cookie that is used for the given opt type (captureing, cookie, etc.)\n * @param {string} token - PostHog project captureing token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the name of the cookie for the given opt type\n */\n\n\nfunction _getStorageKey(token, options) {\n  options = options || {};\n  return (options.persistencePrefix || GDPR_DEFAULT_PERSISTENCE_PREFIX) + token;\n}\n/**\n * Get the value of the cookie that is used for the given opt type (captureing, cookie, etc.)\n * @param {string} token - PostHog project captureing token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the value of the cookie for the given opt type\n */\n\n\nfunction _getStorageValue(token, options) {\n  return _getStorage(options).get(_getStorageKey(token, options));\n}\n/**\n * Check whether the user has set the DNT/doNotCapture setting to true in their browser\n * @param {Object} [options]\n * @param {string} [options.window] - alternate window object to check; used to force various DNT settings in browser tests\n * @returns {boolean} whether the DNT setting is true\n */\n\n\nfunction _hasDoNotCaptureFlagOn(options) {\n  var win$1 = options && options.window || win;\n  var nav = win$1['navigator'] || {};\n  var hasDntOn = false;\n\n  _.each([nav['doNotCapture'], // standard\n  nav['msDoNotCapture'], win$1['doNotCapture']], function (dntValue) {\n    if (_.includes([true, 1, '1', 'yes'], dntValue)) {\n      hasDntOn = true;\n    }\n  });\n\n  return hasDntOn;\n}\n/**\n * Set cookie/localstorage for the user indicating that they are opted in or out for the given opt type\n * @param {boolean} optValue - whether to opt the user in or out for the given opt type\n * @param {string} token - PostHog project captureing token\n * @param {Object} [options]\n * @param {captureFunction} [options.capture] - function used for captureing a PostHog event to record the opt-in action\n * @param {string} [options.captureEventName] - event name to be used for captureing the opt-in action\n * @param {Object} [options.captureProperties] - set of properties to be captureed along with the opt-in action\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\n\n\nfunction _optInOut(optValue, token, options) {\n  if (!_.isString(token) || !token.length) {\n    console.error('gdpr.' + (optValue ? 'optIn' : 'optOut') + ' called with an invalid token');\n    return;\n  }\n\n  options = options || {};\n\n  _getStorage(options).set(_getStorageKey(token, options), optValue ? 1 : 0, _.isNumber(options.cookieExpiration) ? options.cookieExpiration : null, !!options.crossSubdomainCookie, !!options.secureCookie);\n\n  if (options.capture && optValue) {\n    // only capture event if opting in (optValue=true)\n    options.capture(options.captureEventName || '$opt_in', options.captureProperties);\n  }\n}\n/**\n * Wrap a method with a check for whether the user is opted out of data captureing and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @param {function} getConfigValue - getter function for the PostHog API token and other options to be used with opt-out check\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\n\n\nfunction _addOptOutCheck(method, getConfigValue) {\n  return function () {\n    var optedOut = false;\n\n    try {\n      var token = getConfigValue.call(this, 'token');\n      var persistenceType = getConfigValue.call(this, 'opt_out_captureing_persistence_type');\n      var persistencePrefix = getConfigValue.call(this, 'opt_out_captureing_cookie_prefix');\n      var win = getConfigValue.call(this, 'window'); // used to override window during browser tests\n\n      if (token) {\n        // if there was an issue getting the token, continue method execution as normal\n        optedOut = hasOptedOut(token, {\n          persistenceType: persistenceType,\n          persistencePrefix: persistencePrefix,\n          window: win\n        });\n      }\n    } catch (err) {\n      console.error('Unexpected error when checking captureing opt-out status: ' + err);\n    }\n\n    if (!optedOut) {\n      return method.apply(this, arguments);\n    }\n\n    var callback = arguments[arguments.length - 1];\n\n    if (typeof callback === 'function') {\n      callback(0);\n    }\n\n    return;\n  };\n}\n/* eslint camelcase: \"off\" */\n\n/** @const */\n\n\nvar SET_ACTION = '$set';\n/** @const */\n\nvar SET_ONCE_ACTION = '$set_once'; // Common internal methods for posthog.people and posthog.group APIs.\n// These methods shouldn't involve network I/O.\n\nvar apiActions = {\n  set_action: function set_action(prop, to) {\n    var data = {};\n    var $set = {};\n\n    if (_.isObject(prop)) {\n      _.each(prop, function (v, k) {\n        if (!this._is_reserved_property(k)) {\n          $set[k] = v;\n        }\n      }, this);\n    } else {\n      $set[prop] = to;\n    }\n\n    data[SET_ACTION] = $set;\n    return data;\n  },\n  set_once_action: function set_once_action(prop, to) {\n    var data = {};\n    var $set_once = {};\n\n    if (_.isObject(prop)) {\n      _.each(prop, function (v, k) {\n        if (!this._is_reserved_property(k)) {\n          $set_once[k] = v;\n        }\n      }, this);\n    } else {\n      $set_once[prop] = to;\n    }\n\n    data[SET_ONCE_ACTION] = $set_once;\n    return data;\n  }\n};\n/* eslint camelcase: \"off\" */\n\n/**\n * PostHog People Object\n * @constructor\n */\n\nvar PostHogPeople = function PostHogPeople() {};\n\n_.extend(PostHogPeople.prototype, apiActions);\n\nPostHogPeople.prototype._init = function (posthog_instance) {\n  this._posthog = posthog_instance;\n};\n/*\n* Set properties on a user record.\n*\n* ### Usage:\n*\n*     posthog.people.set('gender', 'm');\n*\n*     // or set multiple properties at once\n*     posthog.people.set({\n*         'Company': 'Acme',\n*         'Plan': 'Premium',\n*         'Upgrade date': new Date()\n*     });\n*     // properties can be strings, integers, dates, or lists\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [to] A value to set on the given property name\n* @param {Function} [callback] If provided, the callback will be called after captureing the event.\n*/\n\n\nPostHogPeople.prototype.set = addOptOutCheckPostHogPeople(function (prop, to, callback) {\n  var data = this.set_action(prop, to);\n\n  if (_.isObject(prop)) {\n    callback = to;\n  } // make sure that the referrer info has been updated and saved\n\n\n  if (this._get_config('save_referrer')) {\n    this._posthog['persistence'].update_referrer_info(document.referrer);\n  } // update $set object with default people properties\n\n\n  data[SET_ACTION] = _.extend({}, _.info.people_properties(), this._posthog['persistence'].get_referrer_info(), data[SET_ACTION]);\n  return this._send_request(data, callback);\n});\n/*\n* Set properties on a user record, only if they do not yet exist.\n* This will not overwrite previous people property values, unlike\n* people.set().\n*\n* ### Usage:\n*\n*     posthog.people.set_once('First Login Date', new Date());\n*\n*     // or set multiple properties at once\n*     posthog.people.set_once({\n*         'First Login Date': new Date(),\n*         'Starting Plan': 'Premium'\n*     });\n*\n*     // properties can be strings, integers or dates\n*\n* @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n* @param {*} [to] A value to set on the given property name\n* @param {Function} [callback] If provided, the callback will be called after captureing the event.\n*/\n\nPostHogPeople.prototype.set_once = addOptOutCheckPostHogPeople(function (prop, to, callback) {\n  var data = this.set_once_action(prop, to);\n\n  if (_.isObject(prop)) {\n    callback = to;\n  }\n\n  return this._send_request(data, callback);\n});\n\nPostHogPeople.prototype.toString = function () {\n  return this._posthog.toString() + '.people';\n};\n\nPostHogPeople.prototype._send_request = function (data, callback) {\n  data['$token'] = this._get_config('token');\n  data['$distinct_id'] = this._posthog.get_distinct_id();\n\n  var device_id = this._posthog.get_property('$device_id');\n\n  var user_id = this._posthog.get_property('$user_id');\n\n  var had_persisted_distinct_id = this._posthog.get_property('$had_persisted_distinct_id');\n\n  if (device_id) {\n    data['$device_id'] = device_id;\n  }\n\n  if (user_id) {\n    data['$user_id'] = user_id;\n  }\n\n  if (had_persisted_distinct_id) {\n    data['$had_persisted_distinct_id'] = had_persisted_distinct_id;\n  }\n\n  var date_encoded_data = _.encodeDates(data);\n\n  var truncated_data = _.truncate(date_encoded_data, 255);\n\n  var json_data = _.JSONEncode(date_encoded_data);\n\n  var encoded_data = _.base64Encode(json_data);\n\n  if (!this._identify_called()) {\n    this._enqueue(data);\n\n    if (!_.isUndefined(callback)) {\n      if (this._get_config('verbose')) {\n        callback({\n          status: -1,\n          error: null\n        });\n      } else {\n        callback(-1);\n      }\n    }\n\n    return truncated_data;\n  }\n\n  console$1.log('POSTHOG PEOPLE REQUEST:');\n  console$1.log(truncated_data);\n\n  this._posthog._send_request(this._get_config('api_host') + '/engage/', {\n    'data': encoded_data\n  }, this._posthog._prepare_callback(callback, truncated_data));\n\n  return truncated_data;\n};\n\nPostHogPeople.prototype._get_config = function (conf_var) {\n  return this._posthog.get_config(conf_var);\n};\n\nPostHogPeople.prototype._identify_called = function () {\n  return this._posthog._flags.identify_called === true;\n}; // Queue up engage operations if identify hasn't been called yet.\n\n\nPostHogPeople.prototype._enqueue = function (data) {\n  if (SET_ACTION in data) {\n    this._posthog['persistence']._add_to_people_queue(SET_ACTION, data);\n  } else if (SET_ONCE_ACTION in data) {\n    this._posthog['persistence']._add_to_people_queue(SET_ONCE_ACTION, data);\n  } else {\n    console$1.error('Invalid call to _enqueue():', data);\n  }\n};\n\nPostHogPeople.prototype._flush_one_queue = function (action, action_method, callback, queue_to_params_fn) {\n  var _this = this;\n\n  var queued_data = _.extend({}, this._posthog['persistence']._get_queue(action));\n\n  var action_params = queued_data;\n\n  if (!_.isUndefined(queued_data) && _.isObject(queued_data) && !_.isEmptyObject(queued_data)) {\n    _this._posthog['persistence']._pop_from_people_queue(action, queued_data);\n\n    if (queue_to_params_fn) {\n      action_params = queue_to_params_fn(queued_data);\n    }\n\n    action_method.call(_this, action_params, function (response, data) {\n      // on bad response, we want to add it back to the queue\n      if (response === 0) {\n        _this._posthog['persistence']._add_to_people_queue(action, queued_data);\n      }\n\n      if (!_.isUndefined(callback)) {\n        callback(response, data);\n      }\n    });\n  }\n}; // Flush queued engage operations - order does not matter,\n// and there are network level race conditions anyway\n\n\nPostHogPeople.prototype._flush = function (_set_callback, _set_once_callback) {\n  this._flush_one_queue(SET_ACTION, this.set, _set_callback);\n\n  this._flush_one_queue(SET_ONCE_ACTION, this.set_once, _set_once_callback);\n};\n\nPostHogPeople.prototype._is_reserved_property = function (prop) {\n  return prop === '$distinct_id' || prop === '$token' || prop === '$device_id' || prop === '$user_id' || prop === '$had_persisted_distinct_id';\n}; // PostHogPeople Exports\n\n\nPostHogPeople.prototype['set'] = PostHogPeople.prototype.set;\nPostHogPeople.prototype['set_once'] = PostHogPeople.prototype.set_once;\nPostHogPeople.prototype['toString'] = PostHogPeople.prototype.toString;\n/* eslint camelcase: \"off\" */\n\n/*\n * Constants\n */\n\n/** @const */\n\nvar SET_QUEUE_KEY = '__mps';\n/** @const */\n\nvar SET_ONCE_QUEUE_KEY = '__mpso';\n/** @const */\n\nvar UNSET_QUEUE_KEY = '__mpus';\n/** @const */\n\nvar ADD_QUEUE_KEY = '__mpa';\n/** @const */\n\nvar APPEND_QUEUE_KEY = '__mpap';\n/** @const */\n\nvar REMOVE_QUEUE_KEY = '__mpr';\n/** @const */\n\nvar UNION_QUEUE_KEY = '__mpu'; // This key is deprecated, but we want to check for it to see whether aliasing is allowed.\n\n/** @const */\n\nvar PEOPLE_DISTINCT_ID_KEY = '$people_distinct_id';\n/** @const */\n\nvar ALIAS_ID_KEY = '__alias';\n/** @const */\n\nvar CAMPAIGN_IDS_KEY = '__cmpns';\n/** @const */\n\nvar EVENT_TIMERS_KEY = '__timers';\n/** @const */\n\nvar RESERVED_PROPERTIES = [SET_QUEUE_KEY, SET_ONCE_QUEUE_KEY, UNSET_QUEUE_KEY, ADD_QUEUE_KEY, APPEND_QUEUE_KEY, REMOVE_QUEUE_KEY, UNION_QUEUE_KEY, PEOPLE_DISTINCT_ID_KEY, ALIAS_ID_KEY, CAMPAIGN_IDS_KEY, EVENT_TIMERS_KEY];\n/**\n * PostHog Persistence Object\n * @constructor\n */\n\nvar PostHogPersistence = function PostHogPersistence(config) {\n  this['props'] = {};\n  this.campaign_params_saved = false;\n\n  if (config['persistence_name']) {\n    this.name = 'ph_' + config['persistence_name'];\n  } else {\n    this.name = 'ph_' + config['token'] + '_posthog';\n  }\n\n  var storage_type = config['persistence'];\n\n  if (storage_type !== 'cookie' && storage_type !== 'localStorage') {\n    console$1.critical('Unknown persistence type ' + storage_type + '; falling back to cookie');\n    storage_type = config['persistence'] = 'cookie';\n  }\n\n  if (storage_type === 'localStorage' && _.localStorage.is_supported()) {\n    this.storage = _.localStorage;\n  } else {\n    this.storage = _.cookie;\n  }\n\n  this.load();\n  this.update_config(config);\n  this.upgrade(config);\n  this.save();\n};\n\nPostHogPersistence.prototype.properties = function () {\n  var p = {}; // Filter out reserved properties\n\n  _.each(this['props'], function (v, k) {\n    if (!_.include(RESERVED_PROPERTIES, k)) {\n      p[k] = v;\n    }\n  });\n\n  return p;\n};\n\nPostHogPersistence.prototype.load = function () {\n  if (this.disabled) {\n    return;\n  }\n\n  var entry = this.storage.parse(this.name);\n\n  if (entry) {\n    this['props'] = _.extend({}, entry);\n  }\n};\n\nPostHogPersistence.prototype.upgrade = function (config) {\n  var upgrade_from_old_lib = config['upgrade'],\n      old_cookie_name,\n      old_cookie;\n\n  if (upgrade_from_old_lib) {\n    old_cookie_name = 'ph_super_properties'; // Case where they had a custom cookie name before.\n\n    if (typeof upgrade_from_old_lib === 'string') {\n      old_cookie_name = upgrade_from_old_lib;\n    }\n\n    old_cookie = this.storage.parse(old_cookie_name); // remove the cookie\n\n    this.storage.remove(old_cookie_name);\n    this.storage.remove(old_cookie_name, true);\n\n    if (old_cookie) {\n      this['props'] = _.extend(this['props'], old_cookie['all'], old_cookie['events']);\n    }\n  }\n\n  if (!config['cookie_name'] && config['name'] !== 'posthog') {\n    // special case to handle people with cookies of the form\n    // ph_TOKEN_INSTANCENAME from the first release of this library\n    old_cookie_name = 'ph_' + config['token'] + '_' + config['name'];\n    old_cookie = this.storage.parse(old_cookie_name);\n\n    if (old_cookie) {\n      this.storage.remove(old_cookie_name);\n      this.storage.remove(old_cookie_name, true); // Save the prop values that were in the cookie from before -\n      // this should only happen once as we delete the old one.\n\n      this.register_once(old_cookie);\n    }\n  }\n\n  if (this.storage === _.localStorage) {\n    old_cookie = _.cookie.parse(this.name);\n\n    _.cookie.remove(this.name);\n\n    _.cookie.remove(this.name, true);\n\n    if (old_cookie) {\n      this.register_once(old_cookie);\n    }\n  }\n};\n\nPostHogPersistence.prototype.save = function () {\n  if (this.disabled) {\n    return;\n  }\n\n  this._expire_notification_campaigns();\n\n  this.storage.set(this.name, _.JSONEncode(this['props']), this.expire_days, this.cross_subdomain, this.secure);\n};\n\nPostHogPersistence.prototype.remove = function () {\n  // remove both domain and subdomain cookies\n  this.storage.remove(this.name, false);\n  this.storage.remove(this.name, true);\n}; // removes the storage entry and deletes all loaded data\n// forced name for tests\n\n\nPostHogPersistence.prototype.clear = function () {\n  this.remove();\n  this['props'] = {};\n};\n/**\n* @param {Object} props\n* @param {*=} default_value\n* @param {number=} days\n*/\n\n\nPostHogPersistence.prototype.register_once = function (props, default_value, days) {\n  if (_.isObject(props)) {\n    if (typeof default_value === 'undefined') {\n      default_value = 'None';\n    }\n\n    this.expire_days = typeof days === 'undefined' ? this.default_expiry : days;\n\n    _.each(props, function (val, prop) {\n      if (!this['props'].hasOwnProperty(prop) || this['props'][prop] === default_value) {\n        this['props'][prop] = val;\n      }\n    }, this);\n\n    this.save();\n    return true;\n  }\n\n  return false;\n};\n/**\n* @param {Object} props\n* @param {number=} days\n*/\n\n\nPostHogPersistence.prototype.register = function (props, days) {\n  if (_.isObject(props)) {\n    this.expire_days = typeof days === 'undefined' ? this.default_expiry : days;\n\n    _.extend(this['props'], props);\n\n    this.save();\n    return true;\n  }\n\n  return false;\n};\n\nPostHogPersistence.prototype.unregister = function (prop) {\n  if (prop in this['props']) {\n    delete this['props'][prop];\n    this.save();\n  }\n};\n\nPostHogPersistence.prototype._expire_notification_campaigns = _.safewrap(function () {\n  var campaigns_shown = this['props'][CAMPAIGN_IDS_KEY],\n      EXPIRY_TIME = Config.DEBUG ? 60 * 1000 : 60 * 60 * 1000; // 1 minute (Config.DEBUG) / 1 hour (PDXN)\n\n  if (!campaigns_shown) {\n    return;\n  }\n\n  for (var campaign_id in campaigns_shown) {\n    if (1 * new Date() - campaigns_shown[campaign_id] > EXPIRY_TIME) {\n      delete campaigns_shown[campaign_id];\n    }\n  }\n\n  if (_.isEmptyObject(campaigns_shown)) {\n    delete this['props'][CAMPAIGN_IDS_KEY];\n  }\n});\n\nPostHogPersistence.prototype.update_campaign_params = function () {\n  if (!this.campaign_params_saved) {\n    this.register_once(_.info.campaignParams());\n    this.campaign_params_saved = true;\n  }\n};\n\nPostHogPersistence.prototype.update_search_keyword = function (referrer) {\n  this.register(_.info.searchInfo(referrer));\n}; // EXPORTED METHOD, we test this directly.\n\n\nPostHogPersistence.prototype.update_referrer_info = function (referrer) {\n  // If referrer doesn't exist, we want to note the fact that it was type-in traffic.\n  this.register_once({\n    '$initial_referrer': referrer || '$direct',\n    '$initial_referring_domain': _.info.referringDomain(referrer) || '$direct'\n  }, '');\n};\n\nPostHogPersistence.prototype.get_referrer_info = function () {\n  return _.strip_empty_properties({\n    '$initial_referrer': this['props']['$initial_referrer'],\n    '$initial_referring_domain': this['props']['$initial_referring_domain']\n  });\n}; // safely fills the passed in object with stored properties,\n// does not override any properties defined in both\n// returns the passed in object\n\n\nPostHogPersistence.prototype.safe_merge = function (props) {\n  _.each(this['props'], function (val, prop) {\n    if (!(prop in props)) {\n      props[prop] = val;\n    }\n  });\n\n  return props;\n};\n\nPostHogPersistence.prototype.update_config = function (config) {\n  this.default_expiry = this.expire_days = config['cookie_expiration'];\n  this.set_disabled(config['disable_persistence']);\n  this.set_cross_subdomain(config['cross_subdomain_cookie']);\n  this.set_secure(config['secure_cookie']);\n};\n\nPostHogPersistence.prototype.set_disabled = function (disabled) {\n  this.disabled = disabled;\n\n  if (this.disabled) {\n    this.remove();\n  } else {\n    this.save();\n  }\n};\n\nPostHogPersistence.prototype.set_cross_subdomain = function (cross_subdomain) {\n  if (cross_subdomain !== this.cross_subdomain) {\n    this.cross_subdomain = cross_subdomain;\n    this.remove();\n    this.save();\n  }\n};\n\nPostHogPersistence.prototype.get_cross_subdomain = function () {\n  return this.cross_subdomain;\n};\n\nPostHogPersistence.prototype.set_secure = function (secure) {\n  if (secure !== this.secure) {\n    this.secure = secure ? true : false;\n    this.remove();\n    this.save();\n  }\n};\n\nPostHogPersistence.prototype._add_to_people_queue = function (queue, data) {\n  var q_key = this._get_queue_key(queue),\n      q_data = data[queue],\n      set_q = this._get_or_create_queue(SET_ACTION),\n      set_once_q = this._get_or_create_queue(SET_ONCE_ACTION);\n\n  if (q_key === SET_QUEUE_KEY) {\n    // Update the set queue - we can override any existing values\n    _.extend(set_q, q_data);\n  } else if (q_key === SET_ONCE_QUEUE_KEY) {\n    // only queue the data if there is not already a set_once call for it.\n    _.each(q_data, function (v, k) {\n      if (!(k in set_once_q)) {\n        set_once_q[k] = v;\n      }\n    });\n  }\n\n  console$1.log('POSTHOG PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):');\n  console$1.log(data);\n  this.save();\n};\n\nPostHogPersistence.prototype._pop_from_people_queue = function (queue, data) {\n  var q = this._get_queue(queue);\n\n  if (!_.isUndefined(q)) {\n    _.each(data, function (v, k) {\n      delete q[k];\n    }, this);\n\n    this.save();\n  }\n};\n\nPostHogPersistence.prototype._get_queue_key = function (queue) {\n  if (queue === SET_ACTION) {\n    return SET_QUEUE_KEY;\n  } else if (queue === SET_ONCE_ACTION) {\n    return SET_ONCE_QUEUE_KEY;\n  } else {\n    console$1.error('Invalid queue:', queue);\n  }\n};\n\nPostHogPersistence.prototype._get_queue = function (queue) {\n  return this['props'][this._get_queue_key(queue)];\n};\n\nPostHogPersistence.prototype._get_or_create_queue = function (queue, default_val) {\n  var key = this._get_queue_key(queue);\n\n  default_val = _.isUndefined(default_val) ? {} : default_val;\n  return this['props'][key] || (this['props'][key] = default_val);\n};\n\nPostHogPersistence.prototype.set_event_timer = function (event_name, timestamp) {\n  var timers = this['props'][EVENT_TIMERS_KEY] || {};\n  timers[event_name] = timestamp;\n  this['props'][EVENT_TIMERS_KEY] = timers;\n  this.save();\n};\n\nPostHogPersistence.prototype.remove_event_timer = function (event_name) {\n  var timers = this['props'][EVENT_TIMERS_KEY] || {};\n  var timestamp = timers[event_name];\n\n  if (!_.isUndefined(timestamp)) {\n    delete this['props'][EVENT_TIMERS_KEY][event_name];\n    this.save();\n  }\n\n  return timestamp;\n};\n/* eslint camelcase: \"off\" */\n// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @output_file_name posthog-2.8.min.js\n// ==/ClosureCompiler==\n\n/*\nSIMPLE STYLE GUIDE:\n\nthis.x === public function\nthis._x === internal - only use within this file\nthis.__x === private - only use within the class\n\nGlobals should be all caps\n*/\n\n\nvar init_type; // MODULE or SNIPPET loader\n\nvar posthog_master; // main posthog instance / object\n\nvar INIT_MODULE = 0;\nvar INIT_SNIPPET = 1; // some globals for comparisons\n\nvar __NOOP = function __NOOP() {};\n\nvar __NOOPTIONS = {};\n/** @const */\n\nvar PRIMARY_INSTANCE_NAME = 'posthog';\n/*\n * Dynamic... constants? Is that an oxymoron?\n */\n// http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n// https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#withCredentials\n\nvar USE_XHR = win.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest(); // IE<10 does not support cross-origin XHR's but script tags\n// with defer won't block window.onload; ENQUEUE_REQUESTS\n// should only be true for Opera<12\n\nvar ENQUEUE_REQUESTS = !USE_XHR && userAgent.indexOf('MSIE') === -1 && userAgent.indexOf('Mozilla') === -1; // save reference to navigator.sendBeacon so it can be minified\n\nvar sendBeacon = win.navigator['sendBeacon'];\n\nif (sendBeacon) {\n  sendBeacon = _.bind(sendBeacon, navigator);\n}\n/*\n * Module-level globals\n */\n\n\nvar DEFAULT_CONFIG = {\n  'api_host': 'https://t.posthog.com',\n  'api_method': 'POST',\n  'api_transport': 'XHR',\n  'autocapture': true,\n  'cdn': 'https://cdn.posthog.com',\n  'cross_subdomain_cookie': document$1.location.hostname.indexOf('herokuapp.com') === -1,\n  'persistence': 'cookie',\n  'persistence_name': '',\n  'cookie_name': '',\n  'loaded': function loaded() {},\n  'store_google': true,\n  'save_referrer': true,\n  'test': false,\n  'verbose': false,\n  'img': false,\n  'capture_pageview': true,\n  'debug': false,\n  'capture_links_timeout': 300,\n  'cookie_expiration': 365,\n  'upgrade': false,\n  'disable_persistence': false,\n  'disable_cookie': false,\n  'secure_cookie': false,\n  'ip': true,\n  'opt_out_capturing_by_default': false,\n  'opt_out_persistence_by_default': false,\n  'opt_out_capturing_persistence_type': 'localStorage',\n  'opt_out_capturing_cookie_prefix': null,\n  'property_blacklist': [],\n  'xhr_headers': {},\n  // { header: value, header2: value }\n  'inapp_protocol': '//',\n  'inapp_link_new_window': false,\n  'request_batching': true\n};\nvar DOM_LOADED = false;\n/**\n * PostHog Library Object\n * @constructor\n */\n\nvar PostHogLib = function PostHogLib() {};\n/**\n * create_mplib(token:string, config:object, name:string)\n *\n * This function is used by the init method of PostHogLib objects\n * as well as the main initializer at the end of the JSLib (that\n * initializes document.posthog as well as any additional instances\n * declared before this file has loaded).\n */\n\n\nvar create_mplib = function create_mplib(token, config, name) {\n  var instance,\n      target = name === PRIMARY_INSTANCE_NAME ? posthog_master : posthog_master[name];\n\n  if (target && init_type === INIT_MODULE) {\n    instance = target;\n  } else {\n    if (target && !_.isArray(target)) {\n      console$1.error('You have already initialized ' + name);\n      return;\n    }\n\n    instance = new PostHogLib();\n  }\n\n  instance._cached_groups = {}; // cache groups in a pool\n\n  instance._user_decide_check_complete = false;\n  instance._events_captureed_before_user_decide_check_complete = [];\n\n  instance._init(token, config, name);\n\n  instance['people'] = new PostHogPeople();\n\n  instance['people']._init(instance); // if any instance on the page has debug = true, we set the\n  // global debug to be true\n\n\n  Config.DEBUG = Config.DEBUG || instance.get_config('debug');\n  instance['__autocapture_enabled'] = instance.get_config('autocapture');\n\n  if (instance.get_config('autocapture')) {\n    var num_buckets = 100;\n    var num_enabled_buckets = 100;\n\n    if (!autocapture.enabledForProject(instance.get_config('token'), num_buckets, num_enabled_buckets)) {\n      instance['__autocapture_enabled'] = false;\n      console$1.log('Not in active bucket: disabling Automatic Event Collection.');\n    } else if (!autocapture.isBrowserSupported()) {\n      instance['__autocapture_enabled'] = false;\n      console$1.log('Disabling Automatic Event Collection because this browser is not supported');\n    } else {\n      autocapture.init(instance);\n    }\n  } // if target is not defined, we called init after the lib already\n  // loaded, so there won't be an array of things to execute\n\n\n  if (!_.isUndefined(target) && _.isArray(target)) {\n    // Crunch through the people queue first - we queue this data up &\n    // flush on identify, so it's better to do all these operations first\n    instance._execute_array.call(instance['people'], target['people']);\n\n    instance._execute_array(target);\n  }\n\n  return instance;\n}; // Initialization methods\n\n/**\n * This function initializes a new instance of the PostHog capturing object.\n * All new instances are added to the main posthog object as sub properties (such as\n * posthog.library_name) and also returned by this function. To define a\n * second instance on the page, you would call:\n *\n *     posthog.init('new token', { your: 'config' }, 'library_name');\n *\n * and use it like so:\n *\n *     posthog.library_name.capture(...);\n *\n * @param {String} token   Your PostHog API token\n * @param {Object} [config]  A dictionary of config options to override. <a href=\"https://github.com/posthog/posthog-js/blob/8b2e1f7b/src/posthog-core.js#L87-L110\">See a list of default config options</a>.\n * @param {String} [name]    The name for the new posthog instance that you want created\n */\n\n\nPostHogLib.prototype.init = function (token, config, name) {\n  if (_.isUndefined(name)) {\n    console$1.error('You must name your new library: init(token, config, name)');\n    return;\n  }\n\n  if (name === PRIMARY_INSTANCE_NAME) {\n    console$1.error('You must initialize the main posthog object right after you include the PostHog js snippet');\n    return;\n  }\n\n  var instance = create_mplib(token, config, name);\n  posthog_master[name] = instance;\n\n  instance._loaded();\n\n  return instance;\n}; // posthog._init(token:string, config:object, name:string)\n//\n// This function sets up the current instance of the posthog\n// library.  The difference between this method and the init(...)\n// method is this one initializes the actual instance, whereas the\n// init(...) method sets up a new library and calls _init on it.\n//\n\n\nPostHogLib.prototype._init = function (token, config, name) {\n  this['__loaded'] = true;\n  this['config'] = {};\n  this['_triggered_notifs'] = [];\n  this.set_config(_.extend({}, DEFAULT_CONFIG, config, {\n    'name': name,\n    'token': token,\n    'callback_fn': (name === PRIMARY_INSTANCE_NAME ? name : PRIMARY_INSTANCE_NAME + '.' + name) + '._jsc'\n  }));\n\n  this['_jsc'] = function () {}; // batching requests variabls\n\n\n  this._event_queue = [];\n  this._empty_queue_count = 0; // to track empty polls\n\n  this._should_poll = true; // flag to continue to recursively poll or not\n\n  this._poller = function () {}; // to become interval for reference to clear later\n\n\n  this.__dom_loaded_queue = [];\n  this.__request_queue = [];\n  this.__disabled_events = [];\n  this._flags = {\n    'disable_all_events': false,\n    'identify_called': false\n  };\n  this['persistence'] = this['cookie'] = new PostHogPersistence(this['config']);\n\n  this._gdpr_init();\n\n  var uuid = _.UUID();\n\n  if (!this.get_distinct_id()) {\n    // There is no need to set the distinct id\n    // or the device id if something was already stored\n    // in the persitence\n    this.register_once({\n      'distinct_id': uuid,\n      '$device_id': uuid\n    }, '');\n  } // Set up the window close event handler \"unload\"\n\n\n  win.addEventListener(\"unload\", this._handle_unload.bind(this));\n}; // Private methods\n\n\nPostHogLib.prototype._loaded = function () {\n  this.get_config('loaded')(this); // this happens after so a user can call identify in\n  // the loaded callback\n\n  if (this.get_config('capture_pageview')) {\n    this.capture_pageview();\n  }\n};\n\nPostHogLib.prototype._dom_loaded = function () {\n  _.each(this.__dom_loaded_queue, function (item) {\n    this._capture_dom.apply(this, item);\n  }, this);\n\n  if (!this.has_opted_out_capturing()) {\n    _.each(this.__request_queue, function (item) {\n      this._send_request.apply(this, item);\n    }, this);\n\n    if (this.get_config('request_batching')) {\n      this._event_queue_poll();\n    }\n  }\n\n  delete this.__dom_loaded_queue;\n  delete this.__request_queue;\n};\n\nPostHogLib.prototype._capture_dom = function (DomClass, args) {\n  if (this.get_config('img')) {\n    console$1.error('You can\\'t use DOM capturing functions with img = true.');\n    return false;\n  }\n\n  if (!DOM_LOADED) {\n    this.__dom_loaded_queue.push([DomClass, args]);\n\n    return false;\n  }\n\n  var dt = new DomClass().init(this);\n  return dt.capture.apply(dt, args);\n};\n/**\n * _prepare_callback() should be called by callers of _send_request for use\n * as the callback argument.\n *\n * If there is no callback, this returns null.\n * If we are going to make XHR/XDR requests, this returns a function.\n * If we are going to use script tags, this returns a string to use as the\n * callback GET param.\n */\n\n\nPostHogLib.prototype._prepare_callback = function (callback, data) {\n  if (_.isUndefined(callback)) {\n    return null;\n  }\n\n  if (USE_XHR) {\n    var callback_function = function callback_function(response) {\n      callback(response, data);\n    };\n\n    return callback_function;\n  } else {\n    // if the user gives us a callback, we store as a random\n    // property on this instances jsc function and update our\n    // callback string to reflect that.\n    var jsc = this['_jsc'];\n    var randomized_cb = '' + Math.floor(Math.random() * 100000000);\n    var callback_string = this.get_config('callback_fn') + '[' + randomized_cb + ']';\n\n    jsc[randomized_cb] = function (response) {\n      delete jsc[randomized_cb];\n      callback(response, data);\n    };\n\n    return callback_string;\n  }\n};\n\nPostHogLib.prototype._event_enqueue = function (url, data, options, callback) {\n  this._event_queue.push({\n    url: url,\n    data: data,\n    options: options,\n    callback: callback\n  });\n\n  if (!this._should_poll) {\n    this._should_poll = true;\n\n    this._event_queue_poll();\n  }\n};\n\nPostHogLib.prototype._format_event_queue_data = function () {\n  var requests = {};\n\n  _.each(this._event_queue, function (request) {\n    var url = request.url,\n        data = request.data;\n    if (requests[url] === undefined) requests[url] = [];\n    requests[url].push(data.data);\n  });\n\n  return requests;\n};\n\nPostHogLib.prototype._event_queue_poll = function () {\n  var _this2 = this;\n\n  var POLL_INTERVAL = 3000;\n  this._poller = setTimeout(function () {\n    if (_this2._event_queue.length > 0) {\n      var requests = _this2._format_event_queue_data();\n\n      for (var url in requests) {\n        var json_data = _.JSONEncode(requests[url]);\n\n        var encoded_data = _.base64Encode(json_data);\n\n        _this2._send_request(url, {\n          data: encoded_data\n        }, __NOOPTIONS, __NOOP);\n      }\n\n      _this2._event_queue.length = 0; // flush the _event_queue\n    } else {\n      _this2._empty_queue_count++;\n    }\n    /**\n     * _empty_queue_count will increment each time the queue is polled\n     *  and it is empty. To avoid emtpy polling (user went idle, stepped away from comp)\n     *  we can turn it off with the _should_poll flag.\n     * \n     * Polling will be re enabled when the next time PostHogLib.capture is called with\n     *  an event that should be added to the event queue. \n     */\n\n\n    if (_this2._empty_queue_count > 4) {\n      _this2._should_poll = false;\n      _this2._empty_queue_count = 0;\n    }\n\n    if (_this2._should_poll) {\n      _this2._event_queue_poll();\n    }\n  }, POLL_INTERVAL);\n};\n\nPostHogLib.prototype._handle_unload = function () {\n  if (!this.get_config('request_batching')) {\n    this.capture('$pageleave', null, {\n      transport: 'sendbeacon'\n    });\n    return;\n  }\n\n  clearInterval(this._poller);\n  this.capture('$pageleave');\n  var data = {};\n\n  if (this._event_queue.length > 0) {\n    data = this._format_event_queue_data();\n  }\n\n  this._event_queue.length = 0;\n\n  for (var url in data) {\n    // sendbeacon has some hard requirments and cant be treated \n    // like a normal post request. Because of that it needs to be encoded\n    var encoded_data = _.base64Encode(_.JSONEncode(data[url]));\n\n    this._send_request(url, {\n      data: encoded_data\n    }, {\n      transport: 'sendbeacon'\n    }, __NOOP);\n  }\n};\n\nPostHogLib.prototype._send_request = function (url, data, options, callback) {\n  if (ENQUEUE_REQUESTS) {\n    this.__request_queue.push(arguments);\n\n    return;\n  }\n\n  var DEFAULT_OPTIONS = {\n    method: this.get_config('api_method'),\n    transport: this.get_config('api_transport')\n  };\n  var body_data = null;\n\n  if (!callback && (_.isFunction(options) || typeof options === 'string')) {\n    callback = options;\n    options = null;\n  }\n\n  options = _.extend(DEFAULT_OPTIONS, options || {});\n\n  if (!USE_XHR) {\n    options.method = 'GET';\n  }\n\n  var use_sendBeacon = sendBeacon && options.transport.toLowerCase() === 'sendbeacon';\n  var use_post = use_sendBeacon || options.method === 'POST'; // needed to correctly format responses\n\n  var verbose_mode = this.get_config('verbose');\n\n  if (data['verbose']) {\n    verbose_mode = true;\n  }\n\n  if (this.get_config('test')) {\n    data['test'] = 1;\n  }\n\n  if (verbose_mode) {\n    data['verbose'] = 1;\n  }\n\n  if (this.get_config('img')) {\n    data['img'] = 1;\n  }\n\n  if (!USE_XHR) {\n    if (callback) {\n      data['callback'] = callback;\n    } else if (verbose_mode || this.get_config('test')) {\n      // Verbose output (from verbose mode, or an error in test mode) is a json blob,\n      // which by itself is not valid javascript. Without a callback, this verbose output will\n      // cause an error when returned via jsonp, so we force a no-op callback param.\n      // See the ECMA script spec: http://www.ecma-international.org/ecma-262/5.1/#sec-12.4\n      data['callback'] = '(function(){})';\n    }\n  }\n\n  var args = {};\n  args['ip'] = this.get_config('ip') ? 1 : 0;\n  args['_'] = new Date().getTime().toString();\n\n  if (use_post) {\n    if (Array.isArray(data)) {\n      body_data = 'data=' + data;\n    } else {\n      body_data = 'data=' + data['data'];\n    }\n\n    delete data['data'];\n  }\n\n  url += '?' + _.HTTPBuildQuery(args);\n\n  if ('img' in data) {\n    var img = document$1.createElement('img');\n    img.src = url;\n    document$1.body.appendChild(img);\n  } else if (use_sendBeacon) {\n    // beacon documentation https://w3c.github.io/beacon/\n    // beacons format the message and use the type property\n    // also no need to try catch as sendBeacon does not report errors\n    //   and is defined as best effort attempt\n    var body = new Blob([body_data], {\n      type: 'application/x-www-form-urlencoded'\n    });\n    sendBeacon(url, body);\n  } else if (USE_XHR) {\n    try {\n      var req = new XMLHttpRequest();\n      req.open(options.method, url, true);\n      var headers = this.get_config('xhr_headers');\n\n      if (use_post) {\n        headers['Content-Type'] = 'application/x-www-form-urlencoded';\n      }\n\n      _.each(headers, function (headerValue, headerName) {\n        req.setRequestHeader(headerName, headerValue);\n      }); // send the ph_optout cookie\n      // withCredentials cannot be modified until after calling .open on Android and Mobile Safari\n\n\n      req.withCredentials = true;\n\n      req.onreadystatechange = function () {\n        if (req.readyState === 4) {\n          // XMLHttpRequest.DONE == 4, except in safari 4\n          if (req.status === 200) {\n            if (callback) {\n              if (verbose_mode) {\n                var response;\n\n                try {\n                  response = _.JSONDecode(req.responseText);\n                } catch (e) {\n                  console$1.error(e);\n                  return;\n                }\n\n                callback(response);\n              } else {\n                callback(Number(req.responseText));\n              }\n            }\n          } else {\n            var error = 'Bad HTTP status: ' + req.status + ' ' + req.statusText;\n            console$1.error(error);\n\n            if (callback) {\n              if (verbose_mode) {\n                callback({\n                  status: 0,\n                  error: error\n                });\n              } else {\n                callback(0);\n              }\n            }\n          }\n        }\n      };\n\n      req.send(body_data);\n    } catch (e) {\n      console$1.error(e);\n    }\n  } else {\n    var script = document$1.createElement('script');\n    script.type = 'text/javascript';\n    script.async = true;\n    script.defer = true;\n    script.src = url;\n    var s = document$1.getElementsByTagName('script')[0];\n    s.parentNode.insertBefore(script, s);\n  }\n};\n/**\n * _execute_array() deals with processing any posthog function\n * calls that were called before the PostHog library were loaded\n * (and are thus stored in an array so they can be called later)\n *\n * Note: we fire off all the posthog function calls && user defined\n * functions BEFORE we fire off posthog capturing calls. This is so\n * identify/register/set_config calls can properly modify early\n * capturing calls.\n *\n * @param {Array} array\n */\n\n\nPostHogLib.prototype._execute_array = function (array) {\n  var fn_name,\n      alias_calls = [],\n      other_calls = [],\n      capturing_calls = [];\n\n  _.each(array, function (item) {\n    if (item) {\n      fn_name = item[0];\n\n      if (_.isArray(fn_name)) {\n        capturing_calls.push(item); // chained call e.g. posthog.get_group().set()\n      } else if (typeof item === 'function') {\n        item.call(this);\n      } else if (_.isArray(item) && fn_name === 'alias') {\n        alias_calls.push(item);\n      } else if (_.isArray(item) && fn_name.indexOf('capture') !== -1 && typeof this[fn_name] === 'function') {\n        capturing_calls.push(item);\n      } else {\n        other_calls.push(item);\n      }\n    }\n  }, this);\n\n  var execute = function execute(calls, context) {\n    _.each(calls, function (item) {\n      if (_.isArray(item[0])) {\n        // chained call\n        var caller = context;\n\n        _.each(item, function (call) {\n          caller = caller[call[0]].apply(caller, call.slice(1));\n        });\n      } else {\n        this[item[0]].apply(this, item.slice(1));\n      }\n    }, context);\n  };\n\n  execute(alias_calls, this);\n  execute(other_calls, this);\n  execute(capturing_calls, this);\n};\n/**\n * push() keeps the standard async-array-push\n * behavior around after the lib is loaded.\n * This is only useful for external integrations that\n * do not wish to rely on our convenience methods\n * (created in the snippet).\n *\n * ### Usage:\n *     posthog.push(['register', { a: 'b' }]);\n *\n * @param {Array} item A [function_name, args...] array to be executed\n */\n\n\nPostHogLib.prototype.push = function (item) {\n  this._execute_array([item]);\n};\n/**\n * Capture an event. This is the most important and\n * frequently used PostHog function.\n *\n * ### Usage:\n *\n *     // capture an event named 'Registered'\n *     posthog.capture('Registered', {'Gender': 'Male', 'Age': 21});\n *\n *     // capture an event using navigator.sendBeacon\n *     posthog.capture('Left page', {'duration_seconds': 35}, {transport: 'sendBeacon'});\n *\n * To capture link clicks or form submissions, see capture_links() or capture_forms().\n *\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Object} [options] Optional configuration for this capture request.\n * @param {String} [options.transport] Transport method for network request ('xhr' or 'sendBeacon').\n * @param {Function} [callback] If provided, the callback function will be called after capturing the event.\n */\n\n\nPostHogLib.prototype.capture = addOptOutCheckPostHogLib(function (event_name, properties, options, callback) {\n  if (!callback && typeof options === 'function') {\n    callback = options;\n    options = null;\n  }\n\n  options = options || __NOOPTIONS;\n  var transport = options['transport']; // external API, don't minify 'transport' prop\n\n  if (transport) {\n    options.transport = transport; // 'transport' prop name can be minified internally\n  }\n\n  if (typeof callback !== 'function') {\n    callback = __NOOP;\n  }\n\n  if (_.isUndefined(event_name)) {\n    console$1.error('No event name provided to posthog.capture');\n    return;\n  }\n\n  if (this._event_is_disabled(event_name)) {\n    callback(0);\n    return;\n  } // set defaults\n\n\n  properties = properties || {};\n  properties['token'] = this.get_config('token'); // set $duration if time_event was previously called for this event\n\n  var start_timestamp = this['persistence'].remove_event_timer(event_name);\n\n  if (!_.isUndefined(start_timestamp)) {\n    var duration_in_ms = new Date().getTime() - start_timestamp;\n    properties['$duration'] = parseFloat((duration_in_ms / 1000).toFixed(3));\n  } // update persistence\n\n\n  this['persistence'].update_search_keyword(document$1.referrer);\n\n  if (this.get_config('store_google')) {\n    this['persistence'].update_campaign_params();\n  }\n\n  if (this.get_config('save_referrer')) {\n    this['persistence'].update_referrer_info(document$1.referrer);\n  } // note: extend writes to the first object, so lets make sure we\n  // don't write to the persistence properties object and info\n  // properties object by passing in a new object\n  // update properties with pageview info and super-properties\n\n\n  properties = _.extend({}, _.info.properties(), this['persistence'].properties(), properties);\n  var property_blacklist = this.get_config('property_blacklist');\n\n  if (_.isArray(property_blacklist)) {\n    _.each(property_blacklist, function (blacklisted_prop) {\n      delete properties[blacklisted_prop];\n    });\n  } else {\n    console$1.error('Invalid value for property_blacklist config: ' + property_blacklist);\n  }\n\n  var data = {\n    'event': event_name,\n    'properties': properties,\n    'timestamp': new Date().toISOString()\n  };\n\n  var truncated_data = _.truncate(data, 255);\n\n  var json_data = _.JSONEncode(truncated_data);\n\n  var encoded_data = _.base64Encode(json_data);\n\n  var url = this.get_config('api_host') + '/e/';\n  var data_object = {\n    'data': encoded_data\n  };\n\n  var cb = this._prepare_callback(callback, truncated_data);\n\n  var has_unique_traits = callback !== __NOOP || options !== __NOOPTIONS;\n  var args = [url, data_object, options, cb];\n\n  if (!this.get_config('request_batching') || has_unique_traits) {\n    this._send_request.apply(this, args);\n  } else {\n    data_object.data = truncated_data;\n\n    this._event_enqueue.apply(this, args);\n  }\n\n  return truncated_data;\n});\n\nPostHogLib.prototype._create_map_key = function (group_key, group_id) {\n  return group_key + '_' + JSON.stringify(group_id);\n};\n\nPostHogLib.prototype._remove_group_from_cache = function (group_key, group_id) {\n  delete this._cached_groups[this._create_map_key(group_key, group_id)];\n};\n/**\n * Capture a page view event, which is currently ignored by the server.\n * This function is called by default on page load unless the\n * capture_pageview configuration variable is false.\n *\n * @param {String} [page] The url of the page to record. If you don't include this, it defaults to the current url.\n * @api private\n */\n\n\nPostHogLib.prototype.capture_pageview = function (page) {\n  if (_.isUndefined(page)) {\n    page = document$1.location.href;\n  }\n\n  this.capture('$pageview');\n};\n/**\n * Capture clicks on a set of document elements. Selector must be a\n * valid query. Elements must exist on the page at the time capture_links is called.\n *\n * ### Usage:\n *\n *     // capture click for link id #nav\n *     posthog.capture_links('#nav', 'Clicked Nav Link');\n *\n * ### Notes:\n *\n * This function will wait up to 300 ms for the PostHog\n * servers to respond. If they have not responded by that time\n * it will head to the link without ensuring that your event\n * has been captureed.  To configure this timeout please see the\n * set_config() documentation below.\n *\n * If you pass a function in as the properties argument, the\n * function will receive the DOMElement that triggered the\n * event as an argument.  You are expected to return an object\n * from the function; any properties defined on this object\n * will be sent to posthog as event properties.\n *\n * @type {Function}\n * @param {Object|String} query A valid DOM query, element or jQuery-esque list\n * @param {String} event_name The name of the event to capture\n * @param {Object|Function} [properties] A properties object or function that returns a dictionary of properties when passed a DOMElement\n */\n\n\nPostHogLib.prototype.capture_links = function () {\n  return this._capture_dom.call(this, LinkCapture, arguments);\n};\n/**\n * Capture form submissions. Selector must be a valid query.\n *\n * ### Usage:\n *\n *     // capture submission for form id 'register'\n *     posthog.capture_forms('#register', 'Created Account');\n *\n * ### Notes:\n *\n * This function will wait up to 300 ms for the posthog\n * servers to respond, if they have not responded by that time\n * it will head to the link without ensuring that your event\n * has been captureed.  To configure this timeout please see the\n * set_config() documentation below.\n *\n * If you pass a function in as the properties argument, the\n * function will receive the DOMElement that triggered the\n * event as an argument.  You are expected to return an object\n * from the function; any properties defined on this object\n * will be sent to posthog as event properties.\n *\n * @type {Function}\n * @param {Object|String} query A valid DOM query, element or jQuery-esque list\n * @param {String} event_name The name of the event to capture\n * @param {Object|Function} [properties] This can be a set of properties, or a function that returns a set of properties after being passed a DOMElement\n */\n\n\nPostHogLib.prototype.capture_forms = function () {\n  return this._capture_dom.call(this, FormCaptureer, arguments);\n};\n/**\n * Register a set of super properties, which are included with all\n * events. This will overwrite previous super property values.\n *\n * ### Usage:\n *\n *     // register 'Gender' as a super property\n *     posthog.register({'Gender': 'Female'});\n *\n *     // register several super properties when a user signs up\n *     posthog.register({\n *         'Email': 'jdoe@example.com',\n *         'Account Type': 'Free'\n *     });\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {Number} [days] How many days since the user's last visit to store the super properties\n */\n\n\nPostHogLib.prototype.register = function (props, days) {\n  this['persistence'].register(props, days);\n};\n/**\n * Register a set of super properties only once. This will not\n * overwrite previous super property values, unlike register().\n *\n * ### Usage:\n *\n *     // register a super property for the first time only\n *     posthog.register_once({\n *         'First Login Date': new Date().toISOString()\n *     });\n *\n * ### Notes:\n *\n * If default_value is specified, current super properties\n * with that value will be overwritten.\n *\n * @param {Object} properties An associative array of properties to store about the user\n * @param {*} [default_value] Value to override if already set in super properties (ex: 'False') Default: 'None'\n * @param {Number} [days] How many days since the users last visit to store the super properties\n */\n\n\nPostHogLib.prototype.register_once = function (props, default_value, days) {\n  this['persistence'].register_once(props, default_value, days);\n};\n/**\n * Delete a super property stored with the current user.\n *\n * @param {String} property The name of the super property to remove\n */\n\n\nPostHogLib.prototype.unregister = function (property) {\n  this['persistence'].unregister(property);\n};\n\nPostHogLib.prototype._register_single = function (prop, value) {\n  var props = {};\n  props[prop] = value;\n  this.register(props);\n};\n/**\n * Identify a user with a unique ID instead of a PostHog\n * randomly generated distinct_id. If the method is never called,\n * then unique visitors will be identified by a UUID generated\n * the first time they visit the site.\n *\n * ### Notes:\n *\n * You can call this function to overwrite a previously set\n * unique ID for the current user. PostHog cannot translate\n * between IDs at this time, so when you change a user's ID\n * they will appear to be a new user.\n *\n * When used alone, posthog.identify will change the user's\n * distinct_id to the unique ID provided. When used in tandem\n * with posthog.alias, it will allow you to identify based on\n * unique ID and map that back to the original, anonymous\n * distinct_id given to the user upon her first arrival to your\n * site (thus connecting anonymous pre-signup activity to\n * post-signup activity). Though the two work together, do not\n * call identify() at the same time as alias(). Calling the two\n * at the same time can cause a race condition, so it is best\n * practice to call identify on the original, anonymous ID\n * right after you've aliased it.\n * <a href=\"https://posthog.com/help/questions/articles/how-should-i-handle-my-user-identity-with-the-posthog-javascript-library\">Learn more about how posthog.identify and posthog.alias can be used</a>.\n *\n * @param {String} [unique_id] A string that uniquely identifies a user. If not provided, the distinct_id currently in the persistent store (cookie or localStorage) will be used.\n */\n\n\nPostHogLib.prototype.identify = function (new_distinct_id, _set_callback, _set_once_callback) {\n  // Optional Parameters\n  //  _set_callback:function  A callback to be run if and when the People set queue is flushed\n  //  _set_once_callback:function  A callback to be run if and when the People set_once queue is flushed\n  var previous_distinct_id = this.get_distinct_id();\n  this.register({\n    '$user_id': new_distinct_id\n  });\n\n  if (!this.get_property('$device_id')) {\n    // The persisted distinct id might not actually be a device id at all\n    // it might be a distinct id of the user from before\n    var device_id = previous_distinct_id;\n    this.register_once({\n      '$had_persisted_distinct_id': true,\n      '$device_id': device_id\n    }, '');\n  } // identify only changes the distinct id if it doesn't match either the existing or the alias;\n  // if it's new, blow away the alias as well.\n\n\n  if (new_distinct_id !== previous_distinct_id && new_distinct_id !== this.get_property(ALIAS_ID_KEY)) {\n    this.unregister(ALIAS_ID_KEY);\n    this.register({\n      'distinct_id': new_distinct_id\n    });\n  }\n\n  this._flags.identify_called = true; // Flush any queued up people requests\n\n  this['people']._flush(_set_callback, _set_once_callback); // send an $identify event any time the distinct_id is changing - logic on the server\n  // will determine whether or not to do anything with it.\n\n\n  if (new_distinct_id !== previous_distinct_id) {\n    this.capture('$identify', {\n      'distinct_id': new_distinct_id,\n      '$anon_distinct_id': previous_distinct_id\n    });\n  }\n};\n/**\n * Clears super properties and generates a new random distinct_id for this instance.\n * Useful for clearing data when a user logs out.\n */\n\n\nPostHogLib.prototype.reset = function (reset_device_id) {\n  var device_id = this.get_property('$device_id');\n  this['persistence'].clear();\n  this._flags.identify_called = false;\n\n  var uuid = _.UUID();\n\n  this.register_once({\n    'distinct_id': uuid,\n    '$device_id': reset_device_id ? uuid : device_id\n  }, '');\n};\n/**\n * Returns the current distinct id of the user. This is either the id automatically\n * generated by the library or the id that has been passed by a call to identify().\n *\n * ### Notes:\n *\n * get_distinct_id() can only be called after the PostHog library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // set distinct_id after the posthog library has loaded\n *     posthog.init('YOUR PROJECT TOKEN', {\n *         loaded: function(posthog) {\n *             distinct_id = posthog.get_distinct_id();\n *         }\n *     });\n */\n\n\nPostHogLib.prototype.get_distinct_id = function () {\n  return this.get_property('distinct_id');\n};\n/**\n * Create an alias, which PostHog will use to link two distinct_ids going forward (not retroactively).\n * Multiple aliases can map to the same original ID, but not vice-versa. Aliases can also be chained - the\n * following is a valid scenario:\n *\n *     posthog.alias('new_id', 'existing_id');\n *     ...\n *     posthog.alias('newer_id', 'new_id');\n *\n * If the original ID is not passed in, we will use the current distinct_id - probably the auto-generated GUID.\n *\n * ### Notes:\n *\n * The best practice is to call alias() when a unique ID is first created for a user\n * (e.g., when a user first registers for an account and provides an email address).\n * alias() should never be called more than once for a given user, except to\n * chain a newer ID to a previously new ID, as described above.\n *\n * @param {String} alias A unique identifier that you want to use for this user in the future.\n * @param {String} [original] The current identifier being used for this user.\n */\n\n\nPostHogLib.prototype.alias = function (alias, original) {\n  // If the $people_distinct_id key exists in persistence, there has been a previous\n  // posthog.people.identify() call made for this user. It is VERY BAD to make an alias with\n  // this ID, as it will duplicate users.\n  if (alias === this.get_property(PEOPLE_DISTINCT_ID_KEY)) {\n    console$1.critical('Attempting to create alias for existing People user - aborting.');\n    return -2;\n  }\n\n  var _this = this;\n\n  if (_.isUndefined(original)) {\n    original = this.get_distinct_id();\n  }\n\n  if (alias !== original) {\n    this._register_single(ALIAS_ID_KEY, alias);\n\n    return this.capture('$create_alias', {\n      'alias': alias,\n      'distinct_id': original\n    }, function () {\n      // Flush the people queue\n      _this.identify(alias);\n    });\n  } else {\n    console$1.error('alias matches current distinct_id - skipping api call.');\n    this.identify(alias);\n    return -1;\n  }\n};\n/**\n * Update the configuration of a posthog library instance.\n *\n * The default config is:\n *\n *     {\n *       // HTTP method for capturing requests\n *       api_method: 'POST'\n *\n *       // transport for sending requests ('XHR' or 'sendBeacon')\n *       // NB: sendBeacon should only be used for scenarios such as\n *       // page unload where a \"best-effort\" attempt to send is\n *       // acceptable; the sendBeacon API does not support callbacks\n *       // or any way to know the result of the request. PostHog\n *       // capturing via sendBeacon will not support any event-\n *       // batching or retry mechanisms.\n *       api_transport: 'XHR'\n *\n *       // super properties cookie expiration (in days)\n *       cookie_expiration: 365\n *\n *       // super properties span subdomains\n *       cross_subdomain_cookie: true\n *\n *       // debug mode\n *       debug: false\n *\n *       // if this is true, the posthog cookie or localStorage entry\n *       // will be deleted, and no user persistence will take place\n *       disable_persistence: false\n *\n *       // if this is true, PostHog will automatically determine\n *       // City, Region and Country data using the IP address of\n *       //the client\n *       ip: true\n *\n *       // opt users out of capturing by this PostHog instance by default\n *       opt_out_capturing_by_default: false\n *\n *       // opt users out of browser data storage by this PostHog instance by default\n *       opt_out_persistence_by_default: false\n *\n *       // persistence mechanism used by opt-in/opt-out methods - cookie\n *       // or localStorage - falls back to cookie if localStorage is unavailable\n *       opt_out_capturing_persistence_type: 'localStorage'\n *\n *       // customize the name of cookie/localStorage set by opt-in/opt-out methods\n *       opt_out_capturing_cookie_prefix: null\n *\n *       // type of persistent store for super properties (cookie/\n *       // localStorage) if set to 'localStorage', any existing\n *       // posthog cookie value with the same persistence_name\n *       // will be transferred to localStorage and deleted\n *       persistence: 'cookie'\n *\n *       // name for super properties persistent store\n *       persistence_name: ''\n *\n *       // names of properties/superproperties which should never\n *       // be sent with capture() calls\n *       property_blacklist: []\n *\n *       // if this is true, posthog cookies will be marked as\n *       // secure, meaning they will only be transmitted over https\n *       secure_cookie: false\n *\n *       // the amount of time capture_links will\n *       // wait for PostHog's servers to respond\n *       capture_links_timeout: 300\n *\n *       // should we capture a page view on page load\n *       capture_pageview: true\n *\n *       // if you set upgrade to be true, the library will check for\n *       // a cookie from our old js library and import super\n *       // properties from it, then the old cookie is deleted\n *       // The upgrade config option only works in the initialization,\n *       // so make sure you set it when you create the library.\n *       upgrade: false\n *\n *       // extra HTTP request headers to set for each API request, in\n *       // the format {'Header-Name': value}\n *       xhr_headers: {}\n *\n *       // protocol for fetching in-app message resources, e.g.\n *       // 'https://' or 'http://'; defaults to '//' (which defers to the\n *       // current page's protocol)\n *       inapp_protocol: '//'\n *\n *       // whether to open in-app message link in new tab/window\n *       inapp_link_new_window: false\n *     }\n *\n *\n * @param {Object} config A dictionary of new configuration values to update\n */\n\n\nPostHogLib.prototype.set_config = function (config) {\n  if (_.isObject(config)) {\n    _.extend(this['config'], config);\n\n    if (!this.get_config('persistence_name')) {\n      this['config']['persistence_name'] = this['config']['cookie_name'];\n    }\n\n    if (!this.get_config('disable_persistence')) {\n      this['config']['disable_persistence'] = this['config']['disable_cookie'];\n    }\n\n    if (this['persistence']) {\n      this['persistence'].update_config(this['config']);\n    }\n\n    Config.DEBUG = Config.DEBUG || this.get_config('debug');\n  }\n};\n/**\n * returns the current config object for the library.\n */\n\n\nPostHogLib.prototype.get_config = function (prop_name) {\n  return this['config'][prop_name];\n};\n/**\n * Returns the value of the super property named property_name. If no such\n * property is set, get_property() will return the undefined value.\n *\n * ### Notes:\n *\n * get_property() can only be called after the PostHog library has finished loading.\n * init() has a loaded function available to handle this automatically. For example:\n *\n *     // grab value for 'user_id' after the posthog library has loaded\n *     posthog.init('YOUR PROJECT TOKEN', {\n *         loaded: function(posthog) {\n *             user_id = posthog.get_property('user_id');\n *         }\n *     });\n *\n * @param {String} property_name The name of the super property you want to retrieve\n */\n\n\nPostHogLib.prototype.get_property = function (property_name) {\n  return this['persistence']['props'][property_name];\n};\n\nPostHogLib.prototype.toString = function () {\n  var name = this.get_config('name');\n\n  if (name !== PRIMARY_INSTANCE_NAME) {\n    name = PRIMARY_INSTANCE_NAME + '.' + name;\n  }\n\n  return name;\n};\n\nPostHogLib.prototype._event_is_disabled = function (event_name) {\n  return _.isBlockedUA(userAgent) || this._flags.disable_all_events || _.include(this.__disabled_events, event_name);\n}; // perform some housekeeping around GDPR opt-in/out state\n\n\nPostHogLib.prototype._gdpr_init = function () {\n  var is_localStorage_requested = this.get_config('opt_out_capturing_persistence_type') === 'localStorage'; // try to convert opt-in/out cookies to localStorage if possible\n\n  if (is_localStorage_requested && _.localStorage.is_supported()) {\n    if (!this.has_opted_in_capturing() && this.has_opted_in_capturing({\n      'persistence_type': 'cookie'\n    })) {\n      this.opt_in_capturing({\n        'enable_persistence': false\n      });\n    }\n\n    if (!this.has_opted_out_capturing() && this.has_opted_out_capturing({\n      'persistence_type': 'cookie'\n    })) {\n      this.opt_out_capturing({\n        'clear_persistence': false\n      });\n    }\n\n    this.clear_opt_in_out_capturing({\n      'persistence_type': 'cookie',\n      'enable_persistence': false\n    });\n  } // check whether the user has already opted out - if so, clear & disable persistence\n\n\n  if (this.has_opted_out_capturing()) {\n    this._gdpr_update_persistence({\n      'clear_persistence': true\n    }); // check whether we should opt out by default\n    // note: we don't clear persistence here by default since opt-out default state is often\n    //       used as an initial state while GDPR information is being collected\n\n  } else if (!this.has_opted_in_capturing() && (this.get_config('opt_out_capturing_by_default') || _.cookie.get('ph_optout'))) {\n    _.cookie.remove('ph_optout');\n\n    this.opt_out_capturing({\n      'clear_persistence': this.get_config('opt_out_persistence_by_default')\n    });\n  }\n};\n/**\n * Enable or disable persistence based on options\n * only enable/disable if persistence is not already in this state\n * @param {boolean} [options.clear_persistence] If true, will delete all data stored by the sdk in persistence and disable it\n * @param {boolean} [options.enable_persistence] If true, will re-enable sdk persistence\n */\n\n\nPostHogLib.prototype._gdpr_update_persistence = function (options) {\n  var disabled;\n\n  if (options && options['clear_persistence']) {\n    disabled = true;\n  } else if (options && options['enable_persistence']) {\n    disabled = false;\n  } else {\n    return;\n  }\n\n  if (!this.get_config('disable_persistence') && this['persistence'].disabled !== disabled) {\n    this['persistence'].set_disabled(disabled);\n  }\n}; // call a base gdpr function after constructing the appropriate token and options args\n\n\nPostHogLib.prototype._gdpr_call_func = function (func, options) {\n  options = _.extend({\n    'capture': _.bind(this.capture, this),\n    'persistence_type': this.get_config('opt_out_capturing_persistence_type'),\n    'cookie_prefix': this.get_config('opt_out_capturing_cookie_prefix'),\n    'cookie_expiration': this.get_config('cookie_expiration'),\n    'cross_subdomain_cookie': this.get_config('cross_subdomain_cookie'),\n    'secure_cookie': this.get_config('secure_cookie')\n  }, options); // check if localStorage can be used for recording opt out status, fall back to cookie if not\n\n  if (!_.localStorage.is_supported()) {\n    options['persistence_type'] = 'cookie';\n  }\n\n  return func(this.get_config('token'), {\n    capture: options['capture'],\n    captureEventName: options['capture_event_name'],\n    captureProperties: options['capture_properties'],\n    persistenceType: options['persistence_type'],\n    persistencePrefix: options['cookie_prefix'],\n    cookieExpiration: options['cookie_expiration'],\n    crossSubdomainCookie: options['cross_subdomain_cookie'],\n    secureCookie: options['secure_cookie']\n  });\n};\n/**\n * Opt the user in to data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     // opt user in\n *     posthog.opt_in_capturing();\n *\n *     // opt user in with specific event name, properties, cookie configuration\n *     posthog.opt_in_capturing({\n *         capture_event_name: 'User opted in',\n *         capture_event_properties: {\n *             'Email': 'jdoe@example.com'\n *         },\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {function} [options.capture] Function used for capturing a PostHog event to record the opt-in action (default is this PostHog instance's capture method)\n * @param {string} [options.capture_event_name=$opt_in] Event name to be used for capturing the opt-in action\n * @param {Object} [options.capture_properties] Set of properties to be captureed along with the opt-in action\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n */\n\n\nPostHogLib.prototype.opt_in_capturing = function (options) {\n  options = _.extend({\n    'enable_persistence': true\n  }, options);\n\n  this._gdpr_call_func(optIn, options);\n\n  this._gdpr_update_persistence(options);\n};\n\nPostHogLib.prototype.opt_in_captureing = function (options) {\n  deprecate_warning(\"opt_in_captureing\");\n  this.opt_in_capturing(options);\n};\n/**\n * Opt the user out of data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     // opt user out\n *     posthog.opt_out_capturing();\n *\n *     // opt user out with different cookie configuration from PostHog instance\n *     posthog.opt_out_capturing({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.delete_user=true] If true, will delete the currently identified user's profile and clear all charges after opting the user out\n * @param {boolean} [options.clear_persistence=true] If true, will delete all data stored by the sdk in persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n */\n\n\nPostHogLib.prototype.opt_out_capturing = function (options) {\n  options = _.extend({\n    'clear_persistence': true,\n    'delete_user': true\n  }, options); // delete use and clear charges since these methods may be disabled by opt-out\n\n  if (options['delete_user'] && this['people'] && this['people']._identify_called()) {\n    this['people'].delete_user();\n    this['people'].clear_charges();\n  }\n\n  this._gdpr_call_func(optOut, options);\n\n  this._gdpr_update_persistence(options);\n};\n\nPostHogLib.prototype.opt_out_captureing = function (options) {\n  deprecate_warning(\"opt_out_captureing\");\n  this.opt_out_capturing(options);\n};\n/**\n * Check whether the user has opted in to data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     var has_opted_in = posthog.has_opted_in_capturing();\n *     // use has_opted_in value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-in status\n */\n\n\nPostHogLib.prototype.has_opted_in_capturing = function (options) {\n  return this._gdpr_call_func(hasOptedIn, options);\n};\n\nPostHogLib.prototype.has_opted_in_captureing = function (options) {\n  deprecate_warning(\"has_opted_in_captureing\");\n  return this.has_opted_in_capturing(options);\n};\n/**\n * Check whether the user has opted out of data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     var has_opted_out = posthog.has_opted_out_capturing();\n *     // use has_opted_out value\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} current opt-out status\n */\n\n\nPostHogLib.prototype.has_opted_out_capturing = function (options) {\n  return this._gdpr_call_func(hasOptedOut, options);\n};\n\nPostHogLib.prototype.has_opted_out_captureing = function (options) {\n  deprecate_warning(\"has_opted_out_captureing\");\n  return this.has_opted_out_capturing(options);\n};\n/**\n * Clear the user's opt in/out status of data capturing and cookies/localstorage for this PostHog instance\n *\n * ### Usage\n *\n *     // clear user's opt-in/out status\n *     posthog.clear_opt_in_out_capturing();\n *\n *     // clear user's opt-in/out status with specific cookie configuration - should match\n *     // configuration used when opt_in_capturing/opt_out_capturing methods were called.\n *     posthog.clear_opt_in_out_capturing({\n *         cookie_expiration: 30,\n *         secure_cookie: true\n *     });\n *\n * @param {Object} [options] A dictionary of config options to override\n * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n */\n\n\nPostHogLib.prototype.clear_opt_in_out_capturing = function (options) {\n  options = _.extend({\n    'enable_persistence': true\n  }, options);\n\n  this._gdpr_call_func(clearOptInOut, options);\n\n  this._gdpr_update_persistence(options);\n};\n\nPostHogLib.prototype.clear_opt_in_out_captureing = function (options) {\n  deprecate_warning(\"clear_opt_in_out_captureing\");\n  this.clear_opt_in_out_capturing(options);\n};\n\nfunction deprecate_warning(method) {\n  win.console.warn(\"WARNING! posthog.\" + method + \" is deprecated and will be removed soon! Please use posthog.\" + method.split('captureing').join('capturing') + \" instead (without the \\\"e\\\")!\");\n} // EXPORTS (for closure compiler)\n// PostHogLib Exports\n\n\nPostHogLib.prototype['init'] = PostHogLib.prototype.init;\nPostHogLib.prototype['reset'] = PostHogLib.prototype.reset;\nPostHogLib.prototype['capture'] = PostHogLib.prototype.capture;\nPostHogLib.prototype['capture_links'] = PostHogLib.prototype.capture_links;\nPostHogLib.prototype['capture_forms'] = PostHogLib.prototype.capture_forms;\nPostHogLib.prototype['capture_pageview'] = PostHogLib.prototype.capture_pageview;\nPostHogLib.prototype['register'] = PostHogLib.prototype.register;\nPostHogLib.prototype['register_once'] = PostHogLib.prototype.register_once;\nPostHogLib.prototype['unregister'] = PostHogLib.prototype.unregister;\nPostHogLib.prototype['identify'] = PostHogLib.prototype.identify;\nPostHogLib.prototype['alias'] = PostHogLib.prototype.alias;\nPostHogLib.prototype['set_config'] = PostHogLib.prototype.set_config;\nPostHogLib.prototype['get_config'] = PostHogLib.prototype.get_config;\nPostHogLib.prototype['get_property'] = PostHogLib.prototype.get_property;\nPostHogLib.prototype['get_distinct_id'] = PostHogLib.prototype.get_distinct_id;\nPostHogLib.prototype['toString'] = PostHogLib.prototype.toString;\nPostHogLib.prototype['opt_out_captureing'] = PostHogLib.prototype.opt_out_captureing;\nPostHogLib.prototype['opt_in_captureing'] = PostHogLib.prototype.opt_in_captureing;\nPostHogLib.prototype['has_opted_out_captureing'] = PostHogLib.prototype.has_opted_out_captureing;\nPostHogLib.prototype['has_opted_in_captureing'] = PostHogLib.prototype.has_opted_in_captureing;\nPostHogLib.prototype['clear_opt_in_out_captureing'] = PostHogLib.prototype.clear_opt_in_out_captureing;\nPostHogLib.prototype['opt_out_capturing'] = PostHogLib.prototype.opt_out_capturing;\nPostHogLib.prototype['opt_in_capturing'] = PostHogLib.prototype.opt_in_capturing;\nPostHogLib.prototype['has_opted_out_capturing'] = PostHogLib.prototype.has_opted_out_capturing;\nPostHogLib.prototype['has_opted_in_capturing'] = PostHogLib.prototype.has_opted_in_capturing;\nPostHogLib.prototype['clear_opt_in_out_capturing'] = PostHogLib.prototype.clear_opt_in_out_capturing; // PostHogPersistence Exports\n\nPostHogPersistence.prototype['properties'] = PostHogPersistence.prototype.properties;\nPostHogPersistence.prototype['update_search_keyword'] = PostHogPersistence.prototype.update_search_keyword;\nPostHogPersistence.prototype['update_referrer_info'] = PostHogPersistence.prototype.update_referrer_info;\nPostHogPersistence.prototype['get_cross_subdomain'] = PostHogPersistence.prototype.get_cross_subdomain;\nPostHogPersistence.prototype['clear'] = PostHogPersistence.prototype.clear;\n\n_.safewrap_class(PostHogLib, ['identify']);\n\nvar instances = {};\n\nvar extend_mp = function extend_mp() {\n  // add all the sub posthog instances\n  _.each(instances, function (instance, name) {\n    if (name !== PRIMARY_INSTANCE_NAME) {\n      posthog_master[name] = instance;\n    }\n  }); // add private functions as _\n\n\n  posthog_master['_'] = _;\n};\n\nvar override_ph_init_func = function override_ph_init_func() {\n  // we override the snippets init function to handle the case where a\n  // user initializes the posthog library after the script loads & runs\n  posthog_master['init'] = function (token, config, name) {\n    if (name) {\n      // initialize a sub library\n      if (!posthog_master[name]) {\n        posthog_master[name] = instances[name] = create_mplib(token, config, name);\n\n        posthog_master[name]._loaded();\n      }\n\n      return posthog_master[name];\n    } else {\n      var instance = posthog_master;\n\n      if (instances[PRIMARY_INSTANCE_NAME]) {\n        // main posthog lib already initialized\n        instance = instances[PRIMARY_INSTANCE_NAME];\n      } else if (token) {\n        // intialize the main posthog lib\n        instance = create_mplib(token, config, PRIMARY_INSTANCE_NAME);\n\n        instance._loaded();\n\n        instances[PRIMARY_INSTANCE_NAME] = instance;\n      }\n\n      posthog_master = instance;\n\n      if (init_type === INIT_SNIPPET) {\n        win[PRIMARY_INSTANCE_NAME] = posthog_master;\n      }\n\n      extend_mp();\n    }\n  };\n};\n\nvar add_dom_loaded_handler = function add_dom_loaded_handler() {\n  // Cross browser DOM Loaded support\n  function dom_loaded_handler() {\n    // function flag since we only want to execute this once\n    if (dom_loaded_handler.done) {\n      return;\n    }\n\n    dom_loaded_handler.done = true;\n    DOM_LOADED = true;\n    ENQUEUE_REQUESTS = false;\n\n    _.each(instances, function (inst) {\n      inst._dom_loaded();\n    });\n  }\n\n  function do_scroll_check() {\n    try {\n      document$1.documentElement.doScroll('left');\n    } catch (e) {\n      setTimeout(do_scroll_check, 1);\n      return;\n    }\n\n    dom_loaded_handler();\n  }\n\n  if (document$1.addEventListener) {\n    if (document$1.readyState === 'complete') {\n      // safari 4 can fire the DOMContentLoaded event before loading all\n      // external JS (including this file). you will see some copypasta\n      // on the internet that checks for 'complete' and 'loaded', but\n      // 'loaded' is an IE thing\n      dom_loaded_handler();\n    } else {\n      document$1.addEventListener('DOMContentLoaded', dom_loaded_handler, false);\n    }\n  } else if (document$1.attachEvent) {\n    // IE\n    document$1.attachEvent('onreadystatechange', dom_loaded_handler); // check to make sure we arn't in a frame\n\n    var toplevel = false;\n\n    try {\n      toplevel = win.frameElement === null;\n    } catch (e) {// noop\n    }\n\n    if (document$1.documentElement.doScroll && toplevel) {\n      do_scroll_check();\n    }\n  } // fallback handler, always will work\n\n\n  _.register_event(win, 'load', dom_loaded_handler, true);\n};\n\nfunction init_as_module() {\n  init_type = INIT_MODULE;\n  posthog_master = new PostHogLib();\n  override_ph_init_func();\n  posthog_master['init']();\n  add_dom_loaded_handler();\n  return posthog_master;\n}\n/* eslint camelcase: \"off\" */\n\n\nvar posthog = init_as_module();\nmodule.exports = posthog;","module.exports = require('./lib/index')[\"default\"];","'use strict';\nvar global = require('./_global');\nvar has = require('./_has');\nvar cof = require('./_cof');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar toPrimitive = require('./_to-primitive');\nvar fails = require('./_fails');\nvar gOPN = require('./_object-gopn').f;\nvar gOPD = require('./_object-gopd').f;\nvar dP = require('./_object-dp').f;\nvar $trim = require('./_string-trim').trim;\nvar NUMBER = 'Number';\nvar $Number = global[NUMBER];\nvar Base = $Number;\nvar proto = $Number.prototype;\n// Opera ~12 has broken Object#toString\nvar BROKEN_COF = cof(require('./_object-create')(proto)) == NUMBER;\nvar TRIM = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  if (typeof it == 'string' && it.length > 2) {\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0);\n    var third, radix, maxCode;\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default: return +it;\n      }\n      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {\n  $Number = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for (var keys = require('./_descriptors') ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(Base, key = keys[j]) && !has($Number, key)) {\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  require('./_redefine')(global, NUMBER, $Number);\n}\n","import React from \"react\";\nimport { graphql } from \"gatsby\";\nimport Layout from \"./../components/layout/Layout\";\nimport Meta from \"./../components/seo/Meta\";\nimport withUtterances from \"with-utterances\";\nimport posthog from \"posthog-js\";\n\nconst BlogTemplate = ({ data }) => {\n  const { markdownRemark } = data;\n  const { frontmatter, html } = markdownRemark;\n  posthog.init(\"uZJ_bhngsKFhhPaqWyp_2lc-HyE8vY5XKneeAMWS9cE\", {\n    api_host: \"https://profhog.herokuapp.com\"\n  });\n  return (\n    <Layout>\n      <Meta isBlogPost={true} frontmatter={frontmatter} />\n      <div className=\"content\">\n        <h2 className=\"title\">{frontmatter.title}</h2>\n        <sub>{frontmatter.date}</sub>\n        <div\n          className=\"blog-post-content\"\n          dangerouslySetInnerHTML={{ __html: html }}\n        />\n      </div>\n      <div>\n        <withUtterances />\n      </div>\n    </Layout>\n  );\n};\n\nexport const pageQuery = graphql`\n  query($path: String!) {\n    markdownRemark(frontmatter: { path: { eq: $path } }) {\n      html\n      frontmatter {\n        date(formatString: \"MMMM DD, YYYY\")\n        path\n        title\n      }\n    }\n  }\n`;\n\nexport default withUtterances(\n  BlogTemplate,\n  \"mrprofessor/discussions\",\n  \"github-light\",\n  \"pathname\"\n);\n","\"use strict\";\n\nrequire(\"core-js/modules/es6.object.define-property\");\n\nrequire(\"core-js/modules/es6.object.assign\");\n\nrequire(\"core-js/modules/es6.object.create\");\n\nrequire(\"core-js/modules/es6.object.set-prototype-of\");\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || Object.assign || function (t) {\n  for (var s, i = 1, n = arguments.length; i < n; i++) {\n    s = arguments[i];\n\n    for (var p in s) {\n      if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n  }\n\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = require(\"react\");\n\nfunction withUtterances(WrappedComponent, repo, theme, term, label) {\n  if (theme === void 0) {\n    theme = 'github-light';\n  }\n\n  if (term === void 0) {\n    term = 'pathname';\n  }\n\n  return function (_super) {\n    __extends(class_1, _super);\n\n    function class_1() {\n      var _this = _super !== null && _super.apply(this, arguments) || this;\n\n      _this.withUtterancesContainer = React.createRef();\n\n      _this.injectScript = function () {\n        var script = document.createElement('script');\n        script.src = 'https://utteranc.es/client.js';\n        script.async = true;\n        script.setAttribute('repo', repo);\n        script.setAttribute('theme', theme);\n        script.setAttribute('issue-term', term);\n        if (label) script.setAttribute('label', label);\n\n        _this.withUtterancesContainer.current.appendChild(script);\n      };\n\n      _this.injectPrefetch = function () {\n        document.head.insertAdjacentHTML('beforeend', '<link rel=\"prefetch\" href=\"https://utteranc.es/client.js\" />');\n      };\n\n      _this.injectPreload = function () {\n        document.head.insertAdjacentHTML('beforeend', '<link rel=\"preload\" href=\"https://utteranc.es/client.js\" as=\"script\" />');\n      };\n\n      _this.initUtterances = function () {\n        _this.injectPrefetch();\n\n        _this.injectPreload();\n\n        _this.injectScript();\n      };\n\n      return _this;\n    }\n\n    class_1.prototype.componentDidMount = function () {\n      this.initUtterances();\n    };\n\n    class_1.prototype.render = function () {\n      return React.createElement(\"div\", {\n        ref: this.withUtterancesContainer\n      }, React.createElement(WrappedComponent, __assign({}, this.props)));\n    };\n\n    return class_1;\n  }(React.Component);\n}\n\nexports[\"default\"] = withUtterances;"],"sourceRoot":""}