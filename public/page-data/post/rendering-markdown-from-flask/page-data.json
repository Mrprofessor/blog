{"componentChunkName":"component---src-templates-blog-template-js","path":"/post/rendering-markdown-from-flask","result":{"data":{"markdownRemark":{"id":"13bf7e88-b9c7-5c81-ab64-9af2bfc4fd7c","html":"<p>In this post I am going to plug about a cool trick(probably useless) that I discovered geeking around the internet.</p>\n<p>I was building a tiny <a href=\"https://github.com/solitudenote/gitkeeper\" target=\"_blank\" rel=\"nofollow\">microservice</a> which would let the client side application securely authenticate with GitHub. After writing the only required API, I wanted to render the <em>README.md</em> file on the index page.</p>\n<p>The easiest option I came up with is </p>\n<p><em>Required packages</em></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip3 <span class=\"token function\">install</span> Flask markdown</code></pre></div>\n<p><em>app.py</em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> markdown\n<span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> Flask\n<span class=\"token keyword\">import</span> markdown<span class=\"token punctuation\">.</span>extensions<span class=\"token punctuation\">.</span>fenced_code\n\napp <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n\n\n<span class=\"token decorator annotation punctuation\">@app<span class=\"token punctuation\">.</span>route</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    readme_file <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"README.md\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"r\"</span><span class=\"token punctuation\">)</span>\n    md_template_string <span class=\"token operator\">=</span> markdown<span class=\"token punctuation\">.</span>markdown<span class=\"token punctuation\">(</span>\n        readme_file<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> extensions<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"fenced_code\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> md_template_string\n\n\n<span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span>\n    app<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>In the above snippet we are using <a href=\"https://flask.palletsprojects.com\" target=\"_blank\" rel=\"nofollow\">Flask</a>(my current favorite) as the web framework, <a href=\"https://github.com/Python-Markdown/markdown\" target=\"_blank\" rel=\"nofollow\">Python-Markdown</a> to convert markdown files to HTML, and <a href=\"https://python-markdown.github.io/extensions/fenced_code_blocks/\" target=\"_blank\" rel=\"nofollow\">fenced_code</a> extension to support code blocks.</p>\n<p>And it looked something like this</p>\n<div class=\"post-image\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1168px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/287231527f48920706c25305d6b63b11/8cdda/markdown-render1.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50.68493150684932%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAA10lEQVQoz42S6QqDQBCDff/3868gKt73faYksKUtrd2FMAM6n9kxjuu6oOq6xnme2Pdd2rZNMj2f8VzXhbvjBEGAPM8xTROGYcA4jui6Dm3bqpqeYCtglmVI0xRFUQh2N/APJqDv+/A8T4rjGE3TYFkWDX/KyqFxZl7mrl6HbUFPYFmW2l/f96rzPEuvAFuYgFVVaX+sBPG6rOu66u9+c/sXGEWRYkOHBsj6a5d3chgJQnnl4zje4mHr6s0hgUmSKDphGMotV8A4MZ/cMT/GPDKn7L/JZPgB4pUPQ9e3bDAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"markdown render1\" title=\"markdown render1\" src=\"/static/287231527f48920706c25305d6b63b11/8cdda/markdown-render1.png\" srcset=\"/static/287231527f48920706c25305d6b63b11/5a46d/markdown-render1.png 300w,\n/static/287231527f48920706c25305d6b63b11/0a47e/markdown-render1.png 600w,\n/static/287231527f48920706c25305d6b63b11/8cdda/markdown-render1.png 1168w\" sizes=\"(max-width: 1168px) 100vw, 1168px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n</div>\n<h3><strong>Not quite there yet!</strong></h3>\n<p>Well even though <a href=\"https://en.wikipedia.org/wiki/Richard_Stallman\" target=\"_blank\" rel=\"nofollow\">Richard Stallman</a> remains my hero, fortunately I do not share his <a href=\"https://stallman.org/\" target=\"_blank\" rel=\"nofollow\">taste</a> on web design. So without over-engineering our little snippet I thought of adding syntax highlighting with <a href=\"https://pygments.org/\" target=\"_blank\" rel=\"nofollow\">pygments</a> and <a href=\"https://python-markdown.github.io/extensions/code_hilite/\" target=\"_blank\" rel=\"nofollow\">CodeHilite</a> extension.</p>\n<p>Let's generate css for syntax highlighting using pygments</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> pygments<span class=\"token punctuation\">.</span>formatters <span class=\"token keyword\">import</span> HtmlFormatter\n\nformatter <span class=\"token operator\">=</span> HtmlFormatter<span class=\"token punctuation\">(</span>style<span class=\"token operator\">=</span><span class=\"token string\">\"emacs\"</span><span class=\"token punctuation\">,</span>full<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>cssclass<span class=\"token operator\">=</span><span class=\"token string\">\"codehilite\"</span><span class=\"token punctuation\">)</span>\ncss_string <span class=\"token operator\">=</span> formatter<span class=\"token punctuation\">.</span>get_style_defs<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Now we need to append the css_string to the markdown converted HTML string.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">md_css_string <span class=\"token operator\">=</span> <span class=\"token string\">\"&lt;style>\"</span> <span class=\"token operator\">+</span> css_string <span class=\"token operator\">+</span> <span class=\"token string\">\"&lt;/style>\"</span>\nmd_template <span class=\"token operator\">=</span> md_css_string <span class=\"token operator\">+</span> md_template_string\n<span class=\"token keyword\">return</span> md_template</code></pre></div>\n<blockquote>\n<p>Alternatively we can use <a href=\"https://github.com/richleland/pygments-css\" target=\"_blank\" rel=\"nofollow\">pygments-css</a> repository to get pre-generated CSS files.</p>\n</blockquote>\n<p>Let's see how the final version looks!</p>\n<div class=\"post-image\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 1158px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/fc240997fa985ddb8aa14ed2c253e0b2/1132d/markdown-render-hl.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 50.94991364421416%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQoz42S3W6EIBCFef/H86LtbtJuXI2iuyqCCCJ6OtDa9GdTJfky6MXMOXNgSZIg0LYtvPdwzj1kWRaEs67rvzBeluiomRkNhmGA1hpKKfR9H2tAShmbHjkszXJcywJ110IqCT/7OCko+k5QP8/zLuxUveF8KXB+LZBeC3DOIYSAtRbGmB+Ef3uwsq4gyJafF7jJYZqmaO+ImocK66rGOGiyq6DH8Qt/MIQ/oTSiQXkv0TZ3OD0SOjJT04Cnqf5zh0dgWZfhhT9BkXUrelhK2lKqlhQHJtrL5D5WcQR2a25oSN1Az2QJaoglpLzxK+09WC5ynPgzeHGBTNOIrioM9D4jlLqhYYaSj3W7b9/bnVyF+g6yTAnBhL7SlwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"markdown render hl\" title=\"markdown render hl\" src=\"/static/fc240997fa985ddb8aa14ed2c253e0b2/1132d/markdown-render-hl.png\" srcset=\"/static/fc240997fa985ddb8aa14ed2c253e0b2/5a46d/markdown-render-hl.png 300w,\n/static/fc240997fa985ddb8aa14ed2c253e0b2/0a47e/markdown-render-hl.png 600w,\n/static/fc240997fa985ddb8aa14ed2c253e0b2/1132d/markdown-render-hl.png 1158w\" sizes=\"(max-width: 1158px) 100vw, 1158px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\">\n  </a>\n    </span>\n</div>\n<p><em>Much better if you ask me!</em></p>\n<h3><strong>Gimme the code!</strong></h3>\n<p>Here is the full source code running on Glitch.</p>\n<div class=\"glitch-embed-wrap\" style=\"height: 420px; width: 100%;\">\n  <iframe\n    src=\"https://glitch.com/embed/#!/embed/silken-football?path=app.py&previewSize=0\"\n    title=\"silken-football on Glitch\"\n    style=\"height: 100%; width: 100%; border: 0;\">\n  </iframe>\n</div>\n<p>Feel free to remix and play around. Adios!</p>","frontmatter":{"date":"February 04, 2020","path":"/post/rendering-markdown-from-flask","title":"Rendering markdown from Flask"}}},"pageContext":{}}}